---
title: 'æŸ¥è¯¢æ•°æ®åº“'
metaTitle: 'æŸ¥è¯¢æ•°æ®åº“'
metaDescription: 'è¯»å†™æ•°æ®åº“'
langSwitcher: ['typescript', 'node']
dbSwitcher: ['postgres', 'mysql']
toc: false
---

## ç”¨Prisma Clientç¼–å†™ç¬¬ä¸€ä¸ªæŸ¥è¯¢

ç°åœ¨å·²ç»ç”Ÿæˆäº†Prisma Clientï¼Œå¯ä»¥å¼€å§‹ç¼–å†™æŸ¥è¯¢æ¥è¯»å–å’Œå†™å…¥æ•°æ®åº“ä¸­çš„æ•°æ®ã€‚å‡ºäºæœ¬æŒ‡å—çš„ç›®çš„ï¼Œæ‚¨å°†ä½¿ç”¨ä¸€ä¸ªæ™®é€šçš„Node.jsè„šæœ¬æ¥æ¢ç´¢Prisma Clientçš„ä¸€äº›åŸºæœ¬ç‰¹æ€§ã€‚

<SwitchTech technologies={['typescript', '*']}>

åˆ›å»ºåä¸ºindexçš„æ–°æ–‡ä»¶ã€‚å¹¶æ·»åŠ ä»¥ä¸‹ä»£ç :

```js file=index.ts copy
import { PrismaClient } from '@prisma/client'

const prisma = new PrismaClient()

async function main() {
  // ... you will write your Prisma Client queries here
}

main()
  .catch((e) => {
    throw e
  })
  .finally(async () => {
    await prisma.$disconnect()
  })
```

</SwitchTech>

<SwitchTech technologies={['node', '*']}>

åˆ›å»ºä¸€ä¸ªåä¸º`index.js`çš„æ–°æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹ä»£ç :

```js file=index.js copy
const { PrismaClient } = require('@prisma/client')

const prisma = new PrismaClient()

async function main() {
  // ... you will write your Prisma Client queries here
}

main()
  .catch((e) => {
    throw e
  })
  .finally(async () => {
    await prisma.$disconnect()
  })
```

</SwitchTech>

ä¸‹é¢æ˜¯ä»£ç ç‰‡æ®µä¸åŒéƒ¨åˆ†çš„å¿«é€Ÿæ¦‚è¿°:

1. `PrismaClient` ä» `@prisma/client` èŠ‚ç‚¹æ¨¡å—å¯¼å…¥æ„é€ å‡½æ•°
2. å®ä¾‹åŒ– `PrismaClient`
3. å®šä¹‰åä¸º `main` çš„ `async` å‡½æ•°ä»¥å‘æ•°æ®åº“å‘é€æŸ¥è¯¢
4. è°ƒç”¨ `main` å‡½æ•°
5. å½“è„šæœ¬ç»ˆæ­¢æ—¶å…³é—­æ•°æ®åº“è¿æ¥

åœ¨ `main` å‡½æ•°å†…éƒ¨ï¼Œæ·»åŠ ä»¥ä¸‹æŸ¥è¯¢ä»æ•°æ®åº“è¯»å–æ‰€æœ‰ `User` è®°å½•å¹¶æ‰“å°ç»“æœ:

<SwitchTech technologies={['typescript', '*']}>

```ts file=index.ts highlight=3,4;add
async function main() {
  // ... you will write your Prisma Client queries here
  const allUsers = await prisma.user.findMany()
  console.log(allUsers)
}
```

</SwitchTech>

<SwitchTech technologies={['node', '*']}>

```js file=index.js highlight=2;delete|3,4;add
async function main() {
  // ... you will write your Prisma Client queries here
  const allUsers = await prisma.user.findMany()
  console.log(allUsers)
}
```

</SwitchTech>

ç°åœ¨ç”¨ä¸‹é¢çš„å‘½ä»¤è¿è¡Œä»£ç :

<SwitchTech technologies={['typescript', '*']}>

```terminal copy
npx ts-node index.ts
```

</SwitchTech>

<SwitchTech technologies={['node', '*']}>

```terminal copy
node index.js
```

</SwitchTech>

è¿™åº”è¯¥æ‰“å°ä¸€ä¸ªç©ºæ•°ç»„ï¼Œå› ä¸º `User` æ•°æ®åº“ä¸­è¿˜æ²¡æœ‰è®°å½•ï¼š

```json no-lines
[]
```

## å°†æ•°æ®å†™å…¥æ•°æ®åº“

åœ¨ä¸Šä¸€èŠ‚ä¸­ä½¿ç”¨çš„`findMany`æŸ¥è¯¢åªä»æ•°æ®åº“ä¸­è¯»å–æ•°æ®(å°½ç®¡å®ƒä»ç„¶æ˜¯ç©ºçš„)ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæ‚¨å°†å­¦ä¹ å¦‚ä½•å°†ä¸€ä¸ªæŸ¥è¯¢å°†æ–°è®°å½•å†™å…¥`Post`å’Œ `User` è¡¨ã€‚

è°ƒæ•´`main`å‡½æ•°å‘æ•°æ®åº“å‘é€`create`æŸ¥è¯¢:

<SwitchTech technologies={['typescript', '*']}>

```ts file=index.ts copy
async function main() {
  await prisma.user.create({
    data: {
      name: 'Alice',
      email: 'alice@prisma.io',
      posts: {
        create: { title: 'Hello World' },
      },
      profile: {
        create: { bio: 'I like turtles' },
      },
    },
  })

  const allUsers = await prisma.user.findMany({
    include: {
      posts: true,
      profile: true,
    },
  })
  console.dir(allUsers, { depth: null })
}
```

</SwitchTech>

<SwitchTech technologies={['node', '*']}>

```js file=index.js copy
async function main() {
  await prisma.user.create({
    data: {
      name: 'Alice',
      email: 'alice@prisma.io',
      posts: {
        create: { title: 'Hello World' },
      },
      profile: {
        create: { bio: 'I like turtles' },
      },
    },
  })

  const allUsers = await prisma.user.findMany({
    include: {
      posts: true,
      profile: true,
    },
  })
  console.dir(allUsers, { depth: null })
}
```

</SwitchTech>

æ­¤ä»£ç ä½¿ç”¨[åµŒå¥—å†™å…¥](../../../../concepts/components/prisma-client/relation-queries#nested-writes)æŸ¥è¯¢`User`ä¸ new `Post`å’Œ`Profile`è®°å½•ä¸€èµ·åˆ›å»ºæ–°è®°å½•ã€‚è¯¥è®°å½•åˆ†åˆ«é€šè¿‡â†”å’Œâ†”[å…³ç³»å­—æ®µ](../../../../concepts/components/prisma-schema/relations#relation-fields)è¿æ¥åˆ°å¦å¤–ä¸¤ä¸ªè®°å½•ã€‚
`User` `Post.author` `User.posts` `Profile.user` `User.profile`

è¯·æ³¨æ„ï¼Œæ‚¨ä¼ é€’çš„[`include`](../../../../concepts/components/prisma-client/select-fields#include-relations-and-select-relation-fields)é€‰é¡¹findManyå‘Šè¯‰ Prisma Clientåœ¨è¿”å›çš„`User`å¯¹è±¡ä¸ŠåŒ…å«`posts`å’Œ`profile`å…³ç³»ã€‚

ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿è¡Œä»£ç ï¼š

<SwitchTech technologies={['typescript', '*']}>

```terminal copy
npx ts-node index.ts
```

</SwitchTech>

<SwitchTech technologies={['node', '*']}>

```terminal copy
node index.js
```

</SwitchTech>

è¾“å‡ºåº”è¯¥ç±»ä¼¼äºï¼š

```js no-lines
[
  {
    email: 'alice@prisma.io',
    id: 1,
    name: 'Alice',
    posts: [
      {
        content: null,
        createdAt: 2020-03-21T16:45:01.246Z,
        id: 1,
        published: false,
        title: 'Hello World',
        authorId: 1,
      }
    ],
    profile: {
      bio: 'I like turtles',
      id: 1,
      userId: 1,
    }
  }
]
```

<SwitchTech technologies={['typescript']}>

è¿˜è¦æ³¨æ„`allUsers`æ˜¯ _é™æ€ç±»å‹_ï¼Œè¿™è¦æ„Ÿè°¢[Prisma Clientç”Ÿæˆçš„ç±»å‹](../../../ concepts/components/ Prisma - Client /advanced-type-safety/ operation - on -partial-structures of model-types)ã€‚æ‚¨å¯ä»¥å°†é¼ æ ‡æ‚¬åœåœ¨ç¼–è¾‘å™¨ä¸­çš„`allUsers`å˜é‡ä¸Šè§‚å¯Ÿè¯¥ç±»å‹ã€‚å®ƒåº”è¯¥è¾“å…¥å¦‚ä¸‹:

```ts no-lines
const allUsers: (User & {
  posts: Post[]
})[]

export type Post = {
  id: number
  title: string
  content: string | null
  published: boolean
  authorId: number | null
}
```

</SwitchTech>

è¯¥æŸ¥è¯¢å‘Userå’ŒPostè¡¨æ·»åŠ äº†æ–°è®°å½•ï¼š

**User**

| **id** | **email**           | **name**  |
| :----- | :------------------ | :-------- |
| `1`    | `"alice@prisma.io"` | `"Alice"` |

**Post**

| **id** | **createdAt**              | **title**       | **content** | **published** | **authorId** |
| :----- | :------------------------- | :-------------- | :---------- | :------------ | :----------- |
| `1`    | `2020-03-21T16:45:01.246Z` | `"Hello World"` | `null`      | `false`       | `1`          |

**Profile**

| **id** | **bio**            | **userId** |
| :----- | :----------------- | :--------- |
| `1`    | `"I like turtles"` | `1`        |

> **æ³¨**:`Post`ä¸Šçš„`authorId`åˆ—å’Œ`Profile`ä¸Šçš„`userId`åˆ—ä¸­çš„æ•°å­—éƒ½å¼•ç”¨äº†`User`è¡¨çš„`id`åˆ—ï¼Œè¿™æ„å‘³ç€`id`å€¼`1`åˆ—å› æ­¤æ˜¯ç¬¬ä¸€ä¸ª(ä¹Ÿæ˜¯å”¯ä¸€çš„)åˆ—ã€‚`User`è®°å½•åœ¨æ•°æ®åº“ä¸­ã€‚

åœ¨è¿›å…¥ä¸‹ä¸€èŠ‚ä¹‹å‰ï¼Œæ‚¨å°†ä½¿ç”¨`update`æŸ¥è¯¢â€œå‘å¸ƒâ€åˆšåˆšåˆ›å»ºçš„`Post`è®°å½•ã€‚è°ƒæ•´`main`åŠŸèƒ½å¦‚ä¸‹:

<SwitchTech technologies={['typescript', '*']}>

```ts file=index.ts copy
async function main() {
  const post = await prisma.post.update({
    where: { id: 1 },
    data: { published: true },
  })
  console.log(post)
}
```

</SwitchTech>

<SwitchTech technologies={['node', '*']}>

```js file=index.js copy
async function main() {
  const post = await prisma.post.update({
    where: { id: 1 },
    data: { published: true },
  })
  console.log(post)
}
```

</SwitchTech>

<SwitchTech technologies={['typescript', '*']}>

ç°åœ¨ä½¿ç”¨ä¸ä¹‹å‰ç›¸åŒçš„å‘½ä»¤è¿è¡Œä»£ç ï¼š

```terminal copy
npx ts-node index.ts
```

</SwitchTech>

<SwitchTech technologies={['node', '*']}>

ç°åœ¨ä½¿ç”¨ä¸ä¹‹å‰ç›¸åŒçš„å‘½ä»¤è¿è¡Œä»£ç ï¼š

```terminal copy
node index.js
```

</SwitchTech>

æ‚¨å°†çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºï¼š

```js no-lines
{
  id: 1,
  title: 'Hello World',
  content: null,
  published: true,
  authorId: 1
}
```

 `id`ä¸º`1`çš„`Post`è®°å½•ç°åœ¨åœ¨æ•°æ®åº“ä¸­è¢«æ›´æ–°äº†:

**Post**

| **id** | **title**       | **content** | **published** | **authorId** |
| :----- | :-------------- | :---------- | :------------ | :----------- |
| `1`    | `"Hello World"` | `null`      | `true`        | `1`          |

å¤ªæ£’äº†ï¼Œæ‚¨ç¬¬ä¸€æ¬¡ä½¿ç”¨ Prisma Client å°†æ–°æ•°æ®å†™å…¥æ•°æ®åº“ ğŸš€

<SwitchTech technologies={['node', 'postgresql']}>

<NavigationLinksContainer>

<ButtonLink
  color="dark"
  type="primary"
  href="./install-prisma-client-node-postgres"
  arrowLeft
>
  å®‰è£… Prisma Client
</ButtonLink>

<ButtonLink color="dark" type="primary" href="./next-steps-node-postgres" arrow>
  ä¸‹ä¸€æ­¥
</ButtonLink>

</NavigationLinksContainer>

</SwitchTech>

<SwitchTech technologies={['node', 'mysql']}>

<NavigationLinksContainer>

<ButtonLink
  color="dark"
  type="primary"
  href="./install-prisma-client-node-mysql"
  arrowLeft
>
  å®‰è£… Prisma Client
</ButtonLink>

<ButtonLink color="dark" type="primary" href="./next-steps-node-mysql" arrow>
  ä¸‹ä¸€æ­¥
</ButtonLink>

</NavigationLinksContainer>

</SwitchTech>

<SwitchTech technologies={['typescript', 'postgresql']}>

<NavigationLinksContainer>

<ButtonLink
  color="dark"
  type="primary"
  href="./install-prisma-client-typescript-postgres"
  arrowLeft
>
  å®‰è£… Prisma Client
</ButtonLink>

<ButtonLink
  color="dark"
  type="primary"
  href="./next-steps-typescript-postgres"
  arrow
>
  ä¸‹ä¸€æ­¥
</ButtonLink>

</NavigationLinksContainer>

</SwitchTech>

<SwitchTech technologies={['typescript', 'mysql']}>

<NavigationLinksContainer>

<ButtonLink
  color="dark"
  type="primary"
  href="./install-prisma-client-typescript-mysql"
  arrowLeft
>
  å®‰è£… Prisma Client
</ButtonLink>

<ButtonLink
  color="dark"
  type="primary"
  href="./next-steps-typescript-mysql"
  arrow
>
  ä¸‹ä¸€æ­¥
</ButtonLink>

</NavigationLinksContainer>

</SwitchTech>
