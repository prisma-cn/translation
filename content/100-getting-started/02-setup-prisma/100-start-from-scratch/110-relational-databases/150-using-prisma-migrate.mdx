---
title: 'ä½¿ç”¨Prismaè¿ç§»'
metaTitle: 'ä½¿ç”¨Prismaè¿ç§»'
metaDescription: 'ä½¿ç”¨Prisma Migrateåˆ›å»ºæ•°æ®åº“è¡¨'
langSwitcher: ['typescript', 'node']
dbSwitcher: ['postgres', 'mysql']
toc: false
---

## ä½¿ç”¨Prisma Migrateåˆ›å»ºæ•°æ®åº“è¡¨

åœ¨æœ¬æŒ‡å—ä¸­ï¼Œæ‚¨å°†ä½¿ç”¨[Prisma Migrate](../../../../concepts/components/prisma-migrate)åœ¨æ•°æ®åº“ä¸­åˆ›å»ºè¡¨ã€‚åœ¨`prisma/schema.prisma`ä¸­å°†ä»¥ä¸‹Prismaæ•°æ®æ¨¡å‹æ·»åŠ åˆ°ä½ çš„Prismaè¡¨ä¸­:

```prisma file=prisma/schema.prisma copy
model Post {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  title     String   @db.VarChar(255)
  content   String?
  published Boolean  @default(false)
  author    User     @relation(fields: [authorId], references: [id])
  authorId  Int
}

model Profile {
  id     Int     @id @default(autoincrement())
  bio    String?
  user   User    @relation(fields: [userId], references: [id])
  userId Int     @unique
}

model User {
  id      Int      @id @default(autoincrement())
  email   String   @unique
  name    String?
  posts   Post[]
  profile Profile?
}
```

è¦å°†æ•°æ®æ¨¡å‹æ˜ å°„åˆ°æ•°æ®åº“æ¶æ„ï¼Œéœ€è¦ä½¿ç”¨`prisma migrate`CLIå‘½ä»¤ï¼š


```terminal
npx prisma migrate dev --name init
```

æ­¤å‘½ä»¤æ‰§è¡Œä¸¤é¡¹æ“ä½œï¼š

1. ä¸ºè¿™æ¬¡è¿ç§»åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„SQLè¿ç§»æ–‡ä»¶
2. å¯¹æ•°æ®åº“è¿è¡ŒSQLè¿ç§»æ–‡ä»¶

> **æ³¨æ„**:é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨è¿è¡Œ`prisma migrate dev`ä¹‹åï¼Œä¼šè°ƒç”¨`generate`ã€‚å¦‚æœä½ çš„æ¨¡å¼ä¸­å®šä¹‰äº†`prisma-client-js`ç”Ÿæˆå™¨ï¼Œè¿™å°†æ£€æŸ¥`@prisma/client`æ˜¯å¦å·²ç»å®‰è£…ï¼Œå¦‚æœå®ƒæ²¡æœ‰å®‰è£…ï¼Œå°±å®‰è£…å®ƒã€‚

å¾ˆå¥½ï¼Œç°åœ¨ä½¿ç”¨Prisma Migrateåœ¨æ•°æ®åº“ä¸­åˆ›å»ºäº†ä¸‰ä¸ªè¡¨ğŸš€

<SwitchTech technologies={['*', 'postgresql']}>

<TabbedContent tabs={[<FileWithIcon text="SQL" icon="code"/>, <FileWithIcon text="Tables" icon="database"/>]}>

<tab>

```sql
CREATE TABLE "Post" (
  "id" SERIAL,
  "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
  "updatedAt" TIMESTAMP(3) NOT NULL,
  "title" VARCHAR(255) NOT NULL,
  "content" TEXT,
  "published" BOOLEAN NOT NULL DEFAULT false,
  "authorId" INTEGER NOT NULL,
  PRIMARY KEY ("id")
);

CREATE TABLE "Profile" (
  "id" SERIAL,
  "bio" TEXT,
  "userId" INTEGER NOT NULL,
  PRIMARY KEY ("id")
);

CREATE TABLE "User" (
  "id" SERIAL,
  "email" TEXT NOT NULL,
  "name" TEXT,
  PRIMARY KEY ("id")
);

CREATE UNIQUE INDEX "Profile.userId_unique" ON "Profile"("userId");
CREATE UNIQUE INDEX "User.email_unique" ON "User"("email");
ALTER TABLE "Post" ADD FOREIGN KEY("authorId")REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE "Profile" ADD FOREIGN KEY("userId")REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE;
```

</tab>

<tab>

**User**

| Column name | Type      | Primary key | Foreign key | Required | Default            |
| :---------- | :-------- | :---------- | :---------- | :------- | :----------------- |
| `id`        | `INTEGER` | **âœ”ï¸**      | No          | **âœ”ï¸**   | _autoincrementing_ |
| `name`      | `TEXT`    | No          | No          | No       | -                  |
| `email`     | `TEXT`    | No          | No          | **âœ”ï¸**   | -                  |

**Post**

| Column name | Type           | Primary key | Foreign key | Required | Default            |
| :---------- | :------------- | :---------- | :---------- | :------- | :----------------- |
| `id`        | `INTEGER`      | **âœ”ï¸**      | No          | **âœ”ï¸**   | _autoincrementing_ |
| `createdAt` | `TIMESTAMP`    | No          | No          | **âœ”ï¸**   | `now()`            |
| `title`     | `VARCHAR(255)` | No          | No          | **âœ”ï¸**   | -                  |
| `content`   | `TEXT`         | No          | No          | No       | -                  |
| `published` | `BOOLEAN`      | No          | No          | **âœ”ï¸**   | `false`            |
| `authorId`  | `INTEGER`      | No          | **âœ”ï¸**      | **âœ”ï¸**   | -                  |

**Profile**

| Column name | Type      | Primary key | Foreign key | Required | Default            |
| :---------- | :-------- | :---------- | :---------- | :------- | :----------------- |
| `id`        | `INTEGER` | **âœ”ï¸**      | No          | **âœ”ï¸**   | _autoincrementing_ |
| `bio`       | `TEXT`    | No          | No          | No       | -                  |
| `userId`    | `INTEGER` | No          | **âœ”ï¸**      | **âœ”ï¸**   | -                  |

</tab>

</TabbedContent>

</SwitchTech>

<SwitchTech technologies={['*', 'mysql']}>

<TabbedContent tabs={[<FileWithIcon text="SQL" icon="code"/>, <FileWithIcon text="Tables" icon="database"/>]}>

<tab>

```sql
CREATE TABLE "Post" (
  "id" SERIAL,
  "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
  "updatedAt" TIMESTAMP(3) NOT NULL,
  "title" TEXT NOT NULL,
  "content" TEXT,
  "published" BOOLEAN NOT NULL DEFAULT false,
  "authorId" INTEGER NOT NULL,
  PRIMARY KEY ("id")
);

CREATE TABLE "Profile" (
  "id" SERIAL,
  "bio" TEXT,
  "userId" INTEGER NOT NULL,
  PRIMARY KEY ("id")
);

CREATE TABLE "User" (
  "id" SERIAL,
  "email" TEXT NOT NULL,
  "name" TEXT,
  PRIMARY KEY ("id")
);

CREATE UNIQUE INDEX "Profile.userId_unique" ON "Profile"("userId");
CREATE UNIQUE INDEX "User.email_unique" ON "User"("email");
ALTER TABLE "Post" ADD FOREIGN KEY("authorId")REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE "Profile" ADD FOREIGN KEY("userId")REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE;
```

</tab>

<tab>

**User**

| Column name | Type      | Primary key | Foreign key | Required | Default            |
| :---------- | :-------- | :---------- | :---------- | :------- | :----------------- |
| `id`        | `INTEGER` | **âœ”ï¸**      | No          | **âœ”ï¸**   | _autoincrementing_ |
| `name`      | `TEXT`    | No          | No          | No       | -                  |
| `email`     | `TEXT`    | No          | No          | **âœ”ï¸**   | -                  |

**Post**

| Column name | Type           | Primary key | Foreign key | Required | Default            |
| :---------- | :------------- | :---------- | :---------- | :------- | :----------------- |
| `id`        | `INTEGER`      | **âœ”ï¸**      | No          | **âœ”ï¸**   | _autoincrementing_ |
| `createdAt` | `TIMESTAMP`    | No          | No          | **âœ”ï¸**   | `now()`            |
| `title`     | `VARCHAR(255)` | No          | No          | **âœ”ï¸**   | -                  |
| `content`   | `TEXT`         | No          | No          | No       | -                  |
| `published` | `BOOLEAN`      | No          | No          | **âœ”ï¸**   | `false`            |
| `authorId`  | `INTEGER`      | No          | **âœ”ï¸**      | **âœ”ï¸**   | -                  |

**Profile**

| Column name | Type      | Primary key | Foreign key | Required | Default            |
| :---------- | :-------- | :---------- | :---------- | :------- | :----------------- |
| `id`        | `INTEGER` | **âœ”ï¸**      | No          | **âœ”ï¸**   | _autoincrementing_ |
| `bio`       | `TEXT`    | No          | No          | No       | -                  |
| `userId`    | `INTEGER` | No          | **âœ”ï¸**      | **âœ”ï¸**   | -                  |

</tab>

</TabbedContent>

</SwitchTech>

<SwitchTech technologies={['node', 'postgresql']}>

<NavigationLinksContainer>

<ButtonLink
  color="dark"
  type="primary"
  href="./connect-your-database-node-postgres"
  arrowLeft
>
  è¿æ¥ä½ çš„æ•°æ®åº“
</ButtonLink>

<ButtonLink
  color="dark"
  type="primary"
  href="./install-prisma-client-node-postgres"
  arrow
>
  å®‰è£… Prisma Client
</ButtonLink>

</NavigationLinksContainer>

</SwitchTech>

<SwitchTech technologies={['node', 'mysql']}>

<NavigationLinksContainer>

<ButtonLink
  color="dark"
  type="primary"
  href="./connect-your-database-node-mysql"
  arrowRight
>
  è¿æ¥ä½ çš„æ•°æ®åº“
</ButtonLink>

<ButtonLink
  color="dark"
  type="primary"
  href="./install-prisma-client-node-mysql"
  arrow
>
  å®‰è£… Prisma Client
</ButtonLink>

</NavigationLinksContainer>

</SwitchTech>

<SwitchTech technologies={['typescript', 'postgresql']}>

<NavigationLinksContainer>

<ButtonLink
  color="dark"
  type="primary"
  href="./connect-your-database-typescript-postgres"
  arrowLeft
>
  è¿æ¥ä½ çš„æ•°æ®åº“
</ButtonLink>

<ButtonLink
  color="dark"
  type="primary"
  href="./install-prisma-client-typescript-postgres"
  arrow
>
  å®‰è£… Prisma Client
</ButtonLink>

</NavigationLinksContainer>

</SwitchTech>

<SwitchTech technologies={['typescript', 'mysql']}>

<NavigationLinksContainer>

<ButtonLink
  color="dark"
  type="primary"
  href="./connect-your-database-typescript-mysql"
  arrowRight
>
  è¿æ¥ä½ çš„æ•°æ®åº“
</ButtonLink>

<ButtonLink
  color="dark"
  type="primary"
  href="./install-prisma-client-typescript-mysql"
  arrow
>
  å®‰è£… Prisma Client
</ButtonLink>

</NavigationLinksContainer>

</SwitchTech>
