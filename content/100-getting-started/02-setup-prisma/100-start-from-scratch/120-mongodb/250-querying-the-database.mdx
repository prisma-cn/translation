---
title: 'æŸ¥è¯¢æ•°æ®åº“'
metaTitle: 'æŸ¥è¯¢æ•°æ®åº“'
metaDescription: 'å¯¹æ•°æ®åº“è¿›è¡Œå†™æ“ä½œå’ŒæŸ¥è¯¢æ“ä½œ'
langSwitcher: ['typescript', 'node']
dbSwitcher: ['mongodb']
toc: false
---

## ä½¿ç”¨ Prisma Client ç¼–å†™æ‚¨çš„ç¬¬ä¸€ä¸ªæŸ¥è¯¢

ç°åœ¨æ‚¨å·²ç»ç”Ÿæˆäº†Prisma Clientï¼Œæ‚¨å¯ä»¥å¼€å§‹ç¼–å†™æŸ¥è¯¢æ¥è¯»å–å’Œå†™å…¥æ•°æ®åº“ä¸­çš„æ•°æ®ã€‚å‡ºäºæœ¬æŒ‡å—çš„ç›®çš„ï¼Œæ‚¨å°†ä½¿ç”¨ä¸€ä¸ªæ™®é€šçš„Node.jsè„šæœ¬æ¥æ¢ç´¢Prisma Clientçš„ä¸€äº›åŸºæœ¬åŠŸèƒ½ã€‚

<SwitchTech technologies={['typescript', '*']}>

åˆ›å»ºä¸€ä¸ªåä¸º`index.ts`çš„æ–°æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹ä»£ç :

```js file=index.ts copy
import { PrismaClient } from '@prisma/client'

const prisma = new PrismaClient()

async function main() {
  // Connect the client
  await prisma.$connect()
  // ... you will write your Prisma Client queries here
}

main()
  .catch((e) => {
    throw e
  })
  .finally(async () => {
    await prisma.$disconnect()
  })
```

</SwitchTech>

<SwitchTech technologies={['node', '*']}>

åˆ›å»ºä¸€ä¸ªåä¸º`index.js`çš„æ–°æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹ä»£ç :

```js file=index.js copy
const { PrismaClient } = require('@prisma/client')

const prisma = new PrismaClient()

async function main() {
  // Connect the client
  await prisma.$connect()
  // ... you will write your Prisma Client queries here
}

main()
  .catch((e) => {
    throw e
  })
  .finally(async () => {
    await prisma.$disconnect()
  })
```

</SwitchTech>

ä¸‹é¢æ˜¯ä»£ç ç‰‡æ®µä¸åŒéƒ¨åˆ†çš„å¿«é€Ÿæ¦‚è¿°:

1. `PrismaClient`ä»`@prisma/client`èŠ‚ç‚¹æ¨¡å—å¯¼å…¥æ„é€ å‡½æ•°
2. å®ä¾‹åŒ– `PrismaClient`
3. å®šä¹‰ä¸€ä¸ªåä¸º`main`çš„`async`å‡½æ•°å‘æ•°æ®åº“å‘é€æŸ¥è¯¢
4. è¿æ¥æ•°æ®åº“
5. è°ƒç”¨`main`å‡½æ•°
6. å½“è„šæœ¬ç»ˆæ­¢æ—¶å…³é—­æ•°æ®åº“è¿æ¥

åœ¨`main`å‡½æ•°å†…éƒ¨ï¼Œæ·»åŠ ä»¥ä¸‹æŸ¥è¯¢ä»æ•°æ®åº“è¯»å–æ‰€æœ‰`User`è®°å½•å¹¶æ‰“å°ç»“æœ:

<SwitchTech technologies={['typescript', '*']}>

```ts file=index.ts
async function main() {
  // Connect the client
  await prisma.$connect()
  // ... you will write your Prisma Client queries here
+  const allUsers = await prisma.user.findMany()
+  console.log(allUsers)
}
```

</SwitchTech>

<SwitchTech technologies={['node', '*']}>

```js file=index.js
async function main() {
   // Connect the client
   await prisma.$connect()
-  // ... you will write your Prisma Client queries here
+  const allUsers = await prisma.user.findMany()
+  console.log(allUsers)
}
```

</SwitchTech>

ç°åœ¨ç”¨ä¸‹é¢çš„å‘½ä»¤è¿è¡Œä»£ç :

<SwitchTech technologies={['typescript', '*']}>

```terminal copy
npx ts-node index.ts
```

</SwitchTech>

<SwitchTech technologies={['node', '*']}>

```terminal copy
node index.js
```

</SwitchTech>

è¿™åº”è¯¥æ‰“å°ä¸€ä¸ªç©ºæ•°ç»„ï¼Œå› ä¸º`User`æ•°æ®åº“ä¸­è¿˜æ²¡æœ‰è®°å½•ï¼š

```json no-lines
[]
```

## å°†æ•°æ®å†™å…¥æ•°æ®åº“

The `findMany` query you used in the previous section only _reads_ data from the database (although it was still empty). In this section, you'll learn how to write a query to _write_ new records into the `Post`, `User` and `Comment` tables.
åœ¨ä¸Šä¸€èŠ‚ä¸­ä½¿ç”¨çš„`findMany`æŸ¥è¯¢åªä»æ•°æ®åº“ä¸­è¯»å–æ•°æ®(å°½ç®¡å®ƒä»ç„¶æ˜¯ç©ºçš„)ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæ‚¨å°†å­¦ä¹ å¦‚ä½•å°†ä¸€ä¸ªæŸ¥è¯¢ä»¥åŠå†™å…¥æ–°è®°å½•åˆ°`Post`ï¼Œ`User`å’Œ`Comment`è¡¨ä¸­ã€‚

è°ƒæ•´`main`å‡½æ•°å‘æ•°æ®åº“å‘é€`create`æŸ¥è¯¢:

<SwitchTech technologies={['typescript', '*']}>

```ts file=index.ts copy
async function main() {
  await prisma.$connect()

  await prisma.user.create({
    data: {
      name: 'Rich',
      email: 'hello@prisma.com',
      posts: {
        create: {
          title: 'My first post',
          body: 'Lots of really interesting stuff',
          slug: 'my-first-post',
        },
      },
    },
  })

  const allUsers = await prisma.user.findMany({
    include: {
      posts: true,
    },
  })
  console.dir(allUsers, { depth: null })
}
```

</SwitchTech>

<SwitchTech technologies={['node', '*']}>

```js file=index.js copy
async function main() {
  await prisma.$connect()

  await prisma.user.create({
    data: {
      name: 'Rich',
      email: 'hello@prisma.com',
      posts: {
        create: {
          title: 'My first post',
          body: 'Lots of really interesting stuff',
          slug: 'my-first-post',
        },
      },
    },
  })

  const allUsers = await prisma.user.findMany({
    include: {
      posts: true,
    },
  })
  console.dir(allUsers, { depth: null })
}
```

</SwitchTech>

è¿™æ®µä»£ç ä½¿ç”¨[åµŒå¥—å†™å…¥](../../../../../concepts/components/prisma-client/relation-queries#nested-writes)æŸ¥è¯¢åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„`User`è®°å½•å’Œä¸€ä¸ªæ–°çš„`Post`ã€‚`User`è®°å½•é€šè¿‡â€œå‘å¸ƒâ€è¿æ¥åˆ°å¦ä¸€ä¸ªè®°å½•ã€‚`Post.author`â†”`User.posts`[å…³ç³»å­—æ®µ](../../../../../concepts/components/prisma-schema/relations#relation-fields)ã€‚




æ³¨æ„ï¼Œä½ å°†[`include`](../../../../concepts/components/prisma-client/select-fields#include-relations-and-select-relation-fields)é€‰é¡¹ä¼ é€’ç»™`findMany`ï¼Œå®ƒå‘Šè¯‰Prisma Clientåœ¨è¿”å›çš„`User`å¯¹è±¡ä¸ŠåŒ…å«`posts`å…³ç³»ã€‚

ç”¨ä¸‹é¢çš„å‘½ä»¤è¿è¡Œä»£ç :

<SwitchTech technologies={['typescript', '*']}>

```terminal copy
npx ts-node index.ts
```

</SwitchTech>

<SwitchTech technologies={['node', '*']}>

```terminal copy
node index.js
```

</SwitchTech>

è¾“å‡ºåº”ç±»ä¼¼äºä»¥ä¸‹å†…å®¹ï¼š

```json5 no-lines
[
  {
    id: '60cc9b0e001e3bfd00a6eddf',
    email: 'hello@prisma.com',
    name: 'Rich',
    posts: [
      {
        id: '60cc9bad005059d6007f45dd',
        slug: 'my-first-post',
        title: 'My first post',
        body: 'Lots of really interesting stuff',
        userId: '60cc9b0e001e3bfd00a6eddf',
      },
    ],
  },
]
```

<SwitchTech technologies={['typescript']}>

è¿˜è¦æ³¨æ„`allUsers`æ˜¯ _é™æ€ç±»å‹_ï¼Œè¿™è¦æ„Ÿè°¢[Prisma Client's ç”Ÿæˆçš„ç±»å‹](../../../../../concepts/components/prisma-client/advanced-type-safety/operating-against-partial-structures-of-model-types)ã€‚æ‚¨å¯ä»¥å°†é¼ æ ‡æ‚¬åœåœ¨ç¼–è¾‘å™¨ä¸­çš„`allUsers`å˜é‡ä¸Šè§‚å¯Ÿè¯¥ç±»å‹ã€‚å®ƒåº”è¯¥è¾“å…¥å¦‚ä¸‹:

```ts no-lines
const allUsers: (User & {
  posts: Post[]
})[]

export type Post = {
  id: number
  title: string
  body: string | null
  published: boolean
  authorId: number | null
}
```

</SwitchTech>

è¯¥æŸ¥è¯¢å‘`User`å’Œ`Post`è¡¨æ·»åŠ äº†æ–°è®°å½•:

**User**

| **id**                     | **email**            | **name** |
| :------------------------- | :------------------- | :------- |
| `60cc9b0e001e3bfd00a6eddf` | `"hello@prisma.com"` | `"Rich"` |

**Post**

| **id**                     | **createdAt**              | **title**         | **content**                        | **published** | **authorId**               |
| :------------------------- | :------------------------- | :---------------- | :--------------------------------- | :------------ | :------------------------- |
| `60cc9bad005059d6007f45dd` | `2020-03-21T16:45:01.246Z` | `"My first post"` | `Lots of really interesting stuff` | `false`       | `60cc9b0e001e3bfd00a6eddf` |

> **Note**: The unique IDs in the `authorId` column on `Post` reference the `id` column of the `User` table, meaning the `id` value `60cc9b0e001e3bfd00a6eddf` column therefore refers to the first (and only) `User` record in the database.
> **æ³¨**:`Post`ä¸Š`authorId`åˆ—çš„å”¯ä¸€`id`å¼•ç”¨äº†`User`è¡¨çš„`id`åˆ—ï¼Œè¿™æ„å‘³ç€idå€¼ä¸º`60cc9b0e001e3bfd00a6eddf`ï¼Œå› æ­¤æ˜¯ç¬¬ä¸€ä¸ª(ä¹Ÿæ˜¯å”¯ä¸€çš„)åˆ—ã€‚`User`è®°å½•åœ¨æ•°æ®åº“ä¸­ã€‚

åœ¨ç»§ç»­ä¸‹ä¸€éƒ¨åˆ†ä¹‹å‰ï¼Œæ‚¨å°†å‘`Post`åˆšåˆšä½¿ç”¨`update`æŸ¥è¯¢åˆ›å»ºçš„è®°å½•æ·»åŠ å‡ æ¡æ³¨é‡Šã€‚è°ƒæ•´`main`åŠŸèƒ½å¦‚ä¸‹ï¼š

<SwitchTech technologies={['typescript', '*']}>

```ts file=index.ts copy
async function main() {
  await prisma.post.update({
    where: {
      slug: 'my-first-post',
    },
    data: {
      comments: {
        createMany: {
          data: [
            { comment: 'Great post!' },
            { comment: "Can't wait to read more!" },
          ],
        },
      },
    },
  })
  const posts = await prisma.post.findMany({
    include: {
      comments: true,
    },
  })

  console.dir(posts, { depth: Infinity })
}
```

</SwitchTech>

<SwitchTech technologies={['node', '*']}>

```js file=index.js copy
async function main() {
  await prisma.post.update({
    where: {
      slug: 'my-first-post',
    },
    data: {
      comments: {
        createMany: {
          data: [
            { comment: 'Great post!' },
            { comment: "Can't wait to read more!" },
          ],
        },
      },
    },
  })
  const posts = await prisma.post.findMany({
    include: {
      comments: true,
    },
  })

  console.dir(posts, { depth: Infinity })
}
```

</SwitchTech>

<SwitchTech technologies={['typescript', '*']}>

ç°åœ¨åƒä»¥å‰ä¸€æ ·ä½¿ç”¨ç›¸åŒçš„å‘½ä»¤è¿è¡Œä»£ç :

```terminal copy
npx ts-node index.ts
```

</SwitchTech>

<SwitchTech technologies={['node', '*']}>

ç°åœ¨åƒä»¥å‰ä¸€æ ·ä½¿ç”¨ç›¸åŒçš„å‘½ä»¤è¿è¡Œä»£ç :

```terminal copy
node index.js
```

</SwitchTech>

æ‚¨å°†çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºï¼š

```json5 no-lines
[
  {
    id: '60cc9bad005059d6007f45dd',
    slug: 'my-first-post',
    title: 'My first post',
    body: 'Lots of really interesting stuff',
    userId: '60cc9b0e001e3bfd00a6eddf',
    comments: [
      {
        id: '60cca420008a21d800578793',
        postId: '60cca40300af8bf000f6ca99',
        comment: 'Great post!',
      },
      {
        id: '60cca420008a21d800578794',
        postId: '60cca40300af8bf000f6ca99',
        comment: "Can't wait to try this!",
      },
    ],
  },
]
```

å¤ªæ£’äº†ï¼Œæ‚¨åˆšåˆšä½¿ç”¨Prisma Clienté¦–æ¬¡å°†æ–°æ•°æ®å†™å…¥æ•°æ®åº“ğŸš€

<SwitchTech technologies={['node', 'mongodb']}>

<NavigationLinksContainer>

<ButtonLink
  color="dark"
  type="primary"
  href="./install-prisma-client-node-mongodb"
  arrowLeft
>
  å®‰è£… Prisma Client
</ButtonLink>

<ButtonLink color="dark" type="primary" href="./next-steps-node-mongodb" arrow>
  ä¸‹ä¸€æ­¥
</ButtonLink>

</NavigationLinksContainer>

</SwitchTech>

<SwitchTech technologies={['typescript', 'mongodb']}>

<NavigationLinksContainer>

<ButtonLink
  color="dark"
  type="primary"
  href="./install-prisma-client-typescript-mongodb"
  arrowLeft
>
  å®‰è£… Prisma Client
</ButtonLink>

<ButtonLink
  color="dark"
  type="primary"
  href="./next-steps-typescript-mongodb"
  arrow
>
  ä¸‹ä¸€æ­¥
</ButtonLink>

</NavigationLinksContainer>

</SwitchTech>
