---
title: 'æŸ¥è¯¢æ•°æ®åº“'
metaTitle: 'æŸ¥è¯¢æ•°æ®åº“'
metaDescription: 'å‘æ•°æ®åº“å†™å…¥æ•°æ®å¹¶æŸ¥è¯¢æ•°æ®åº“'
langSwitcher: ['typescript', 'node']
dbSwitcher: ['mongodb']
toc: false
---

## ä½¿ç”¨ Prisma Client ç¼–å†™æ‚¨çš„ç¬¬ä¸€ä¸ªæŸ¥è¯¢

ç°åœ¨æ‚¨å·²ç»ç”Ÿæˆäº† Prisma å®¢æˆ·ç«¯ï¼Œæ‚¨å¯ä»¥å¼€å§‹ç¼–å†™æŸ¥è¯¢æ¥è¯»å–å’Œå†™å…¥æ•°æ®åº“ä¸­çš„æ•°æ®ã€‚å‡ºäºæœ¬æŒ‡å—çš„ç›®çš„ï¼Œæ‚¨å°†ä½¿ç”¨ä¸€ä¸ªæ™®é€šçš„ Node.js è„šæœ¬æ¥æ¢ç´¢ Prisma Client çš„ä¸€äº›åŸºæœ¬åŠŸèƒ½ã€‚

å¦‚æœæ‚¨æ­£åœ¨æ„å»º REST APIï¼Œæ‚¨å¯ä»¥åœ¨è·¯ç”±å¤„ç†ç¨‹åºä¸­ä½¿ç”¨ Prisma Client æ ¹æ®ä¼ å…¥çš„ HTTP è¯·æ±‚åœ¨æ•°æ®åº“ä¸­è¯»å–å’Œå†™å…¥æ•°æ®ã€‚å¦‚æœæ‚¨æ­£åœ¨æ„å»º GraphQL APIï¼Œæ‚¨å¯ä»¥åœ¨è§£æå™¨ä¸­ä½¿ç”¨ Prisma Client æ ¹æ®ä¼ å…¥çš„æŸ¥è¯¢å’Œçªå˜åœ¨æ•°æ®åº“ä¸­è¯»å–å’Œå†™å…¥æ•°æ®ã€‚

ç„¶è€Œï¼Œå°±æœ¬æŒ‡å—è€Œè¨€ï¼Œæ‚¨åªéœ€åˆ›å»ºä¸€ä¸ªæ™®é€šçš„ Node.js è„šæœ¬æ¥å­¦ä¹ å¦‚ä½•ä½¿ç”¨ Prisma Client å‘æ‚¨çš„æ•°æ®åº“å‘é€æŸ¥è¯¢ã€‚ä¸€æ—¦æ‚¨äº†è§£äº† API çš„å·¥ä½œåŸç†ï¼Œæ‚¨å°±å¯ä»¥å¼€å§‹å°†å…¶é›†æˆåˆ°æ‚¨çš„å®é™…åº”ç”¨ç¨‹åºä»£ç ä¸­ï¼ˆä¾‹å¦‚ REST è·¯ç”±å¤„ç†ç¨‹åºæˆ– GraphQL è§£æç¨‹åºï¼‰ã€‚

<SwitchTech technologies={['typescript', '*']}>

åˆ›å»ºä¸€ä¸ªåä¸ºçš„æ–°æ–‡ä»¶`index.ts`å¹¶å‘å…¶æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š

```js file=index.ts copy
import { PrismaClient } from '@prisma/client'

const prisma = new PrismaClient()

async function main() {
  // Connect the client
  await prisma.$connect()
  // ... you will write your Prisma Client queries here
}

main()
  .catch((e) => {
    throw e
  })
  .finally(async () => {
    await prisma.$disconnect()
  })
```

</SwitchTech>

<SwitchTech technologies={['node', '*']}>

åˆ›å»ºä¸€ä¸ªåä¸ºçš„æ–°æ–‡ä»¶`index.js`å¹¶å‘å…¶æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š

```js file=index.js copy
const { PrismaClient } = require('@prisma/client')

const prisma = new PrismaClient()

async function main() {
  // Connect the client
  await prisma.$connect()
  // ... you will write your Prisma Client queries here
}

main()
  .catch((e) => {
    throw e
  })
  .finally(async () => {
    await prisma.$disconnect()
  })
```

</SwitchTech>

ä»¥ä¸‹æ˜¯ä»£ç ç‰‡æ®µä¸åŒéƒ¨åˆ†çš„å¿«é€Ÿæ¦‚è¿°ï¼š

1. `PrismaClient`ä»`@prisma/client`èŠ‚ç‚¹æ¨¡å—å¯¼å…¥æ„é€ å‡½æ•°
2. å®ä¾‹åŒ–`PrismaClient`
3. å®šä¹‰ä¸€ä¸ª`async`åä¸º`main`å‘æ•°æ®åº“å‘é€æŸ¥è¯¢çš„å‡½æ•°
4. è¿æ¥æ•°æ®åº“
5. è°ƒç”¨`main`å‡½æ•°
6. è„šæœ¬ç»ˆæ­¢æ—¶å…³é—­æ•°æ®åº“è¿æ¥

åœ¨`main`å‡½æ•°å†…éƒ¨ï¼Œæ·»åŠ ä»¥ä¸‹æŸ¥è¯¢ä»¥`User`ä»æ•°æ®åº“ä¸­è¯»å–æ‰€æœ‰è®°å½•å¹¶æ‰“å°ç»“æœï¼š

<SwitchTech technologies={['typescript', '*']}>

```ts file=index.ts
async function main() {
  // Connect the client
  await prisma.$connect()
  // ... you will write your Prisma Client queries here
+  const allUsers = await prisma.user.findMany()
+  console.log(allUsers)
}
```

</SwitchTech>

<SwitchTech technologies={['node', '*']}>

```js file=index.js
async function main() {
   // Connect the client
   await prisma.$connect()
-  // ... you will write your Prisma Client queries here
+  const allUsers = await prisma.user.findMany()
+  console.log(allUsers)
}
```

</SwitchTech>

ç°åœ¨ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿è¡Œä»£ç ï¼š

<SwitchTech technologies={['typescript', '*']}>

```terminal copy
npx ts-node index.ts
```

</SwitchTech>

<SwitchTech technologies={['node', '*']}>

```terminal copy
node index.js
```

</SwitchTech>

è¿™åº”è¯¥æ‰“å°ä¸€ä¸ªç©ºæ•°ç»„ï¼Œå› ä¸º`User`æ•°æ®åº“ä¸­è¿˜æ²¡æœ‰è®°å½•ï¼š

```json no-lines
[]
```

## å°†æ•°æ®å†™å…¥æ•°æ®åº“

The `findMany` query you used in the previous section only _reads_ data from the database (although it was still empty). In this section, you'll learn how to write a query to _write_ new records into the `Post`, `User` and `Comment` tables.
`findMany`æ‚¨åœ¨ä¸Šä¸€èŠ‚ä¸­ä½¿ç”¨çš„æŸ¥è¯¢ä»…ä»æ•°æ®åº“ä¸­è¯»å–æ•°æ®ï¼ˆå°½ç®¡å®ƒä»ç„¶æ˜¯ç©ºçš„ï¼‰ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæ‚¨å°†å­¦ä¹ å¦‚ä½•ç¼–å†™æŸ¥è¯¢ä»¥å°†æ–°è®°å½•å†™å…¥`Post`ã€`User`å’Œ`Comment`è¡¨ã€‚

è°ƒæ•´`main`å‡½æ•°å‘`create`æ•°æ®åº“å‘é€æŸ¥è¯¢ï¼š

<SwitchTech technologies={['typescript', '*']}>

```ts file=index.ts copy
async function main() {
  await prisma.$connect()

  await prisma.user.create({
    data: {
      name: 'Rich',
      email: 'hello@prisma.com',
      posts: {
        create: {
          title: 'My first post',
          body: 'Lots of really interesting stuff',
          slug: 'my-first-post',
        },
      },
    },
  })

  const allUsers = await prisma.user.findMany({
    include: {
      posts: true,
    },
  })
  console.dir(allUsers, { depth: null })
}
```

</SwitchTech>

<SwitchTech technologies={['node', '*']}>

```js file=index.js copy
async function main() {
  await prisma.$connect()

  await prisma.user.create({
    data: {
      name: 'Rich',
      email: 'hello@prisma.com',
      posts: {
        create: {
          title: 'My first post',
          body: 'Lots of really interesting stuff',
          slug: 'my-first-post',
        },
      },
    },
  })

  const allUsers = await prisma.user.findMany({
    include: {
      posts: true,
    },
  })
  console.dir(allUsers, { depth: null })
}
```

</SwitchTech>

æ­¤ä»£ç ä½¿ç”¨[åµŒå¥—å†™å…¥](../../../../../concepts/components/prisma-client/relation-queries#nested-writes)æŸ¥è¯¢åˆ›å»ºä¸€ä¸ªæ–°`User`è®°å½•å’Œä¸€ä¸ªæ–°è®°å½•ã€‚è¯¥è®°å½•åˆ†åˆ«é€šè¿‡`Post.author`â†”`User.posts`[å…³ç³»å­—æ®µ](../../../../../concepts/components/prisma-schema/relations#relation-fields)è¿æ¥åˆ°å¦ä¸€ä¸ªè®°å½•ã€‚

æ³¨æ„ï¼Œæ‚¨ä¼ é€’çš„[`include`](../../../../concepts/components/prisma-client/select-fields#include-relations-and-select-relation-fields)é€‰é¡¹`findMany`å‘Šè¯‰ Prisma Client `posts`åœ¨è¿”å›çš„`User`å¯¹è±¡ä¸ŠåŒ…å«å…³ç³»ã€‚

ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿è¡Œä»£ç ï¼š

<SwitchTech technologies={['typescript', '*']}>

```terminal copy
npx ts-node index.ts
```

</SwitchTech>

<SwitchTech technologies={['node', '*']}>

```terminal copy
node index.js
```

</SwitchTech>

è¾“å‡ºåº”è¯¥ç±»ä¼¼äºï¼š

```json5 no-lines
[
  {
    id: '60cc9b0e001e3bfd00a6eddf',
    email: 'hello@prisma.com',
    name: 'Rich',
    posts: [
      {
        id: '60cc9bad005059d6007f45dd',
        slug: 'my-first-post',
        title: 'My first post',
        body: 'Lots of really interesting stuff',
        userId: '60cc9b0e001e3bfd00a6eddf',
      },
    ],
  },
]
```

<SwitchTech technologies={['typescript']}>

è¿˜è¦æ³¨æ„`allUsers`æ˜¯ _é™æ€ç±»å‹_ï¼Œè¿™è¦æ„Ÿè°¢[Prisma Client's ç”Ÿæˆçš„ç±»å‹](../../../../../concepts/components/prisma-client/advanced-type-safety/operating-against-partial-structures-of-model-types)ã€‚æ‚¨å¯ä»¥å°†é¼ æ ‡æ‚¬åœåœ¨ç¼–è¾‘å™¨ä¸­çš„`allUsers`å˜é‡ä¸Šè§‚å¯Ÿè¯¥ç±»å‹ã€‚å®ƒåº”è¯¥è¾“å…¥å¦‚ä¸‹:


```ts no-lines
const allUsers: (User & {
  posts: Post[]
})[]

export type Post = {
  id: number
  title: string
  body: string | null
  published: boolean
  authorId: number | null
}
```

</SwitchTech>

è¯¥æŸ¥è¯¢å‘`User`å’Œ`Post`é›†åˆæ·»åŠ äº†æ–°è®°å½•ï¼š

<Admonition type="info">

Prismaæ¶æ„ä¸­çš„`id`å­—æ®µæ˜ å°„åˆ°åº•å±‚MongoDBæ•°æ®åº“ä¸­çš„`_id`ã€‚

</Admonition>

**User** collection

| **\_id**                   | **email**            | **name** |
| :------------------------- | :------------------- | :------- |
| `60cc9b0e001e3bfd00a6eddf` | `"hello@prisma.com"` | `"Rich"` |

**Post** collection

| **\_id**                   | **createdAt**              | **title**         | **content**                        | **published** | **authorId**               |
| :------------------------- | :------------------------- | :---------------- | :--------------------------------- | :------------ | :------------------------- |
| `60cc9bad005059d6007f45dd` | `2020-03-21T16:45:01.246Z` | `"My first post"` | `Lots of really interesting stuff` | `false`       | `60cc9b0e001e3bfd00a6eddf` |

> **æ³¨æ„**ï¼š`authorId`æ–‡æ¡£å­—æ®µä¸­çš„å”¯ä¸€æ ‡è¯†ç¬¦`Post`å¼•ç”¨é›†åˆä¸­çš„_idæ–‡æ¡£å­—æ®µUserï¼Œè¿™æ„å‘³ç€`_id`å€¼`60cc9b0e001e3bfd00a6eddf`åˆ—å› æ­¤æŒ‡çš„æ˜¯æ•°æ®åº“ä¸­çš„ç¬¬ä¸€æ¡ï¼ˆä¹Ÿæ˜¯å”¯ä¸€ä¸€æ¡ï¼‰`User`è®°å½•ã€‚

åœ¨ç»§ç»­ä¸‹ä¸€éƒ¨åˆ†ä¹‹å‰ï¼Œæ‚¨å°†å‘`Post`åˆšåˆšä½¿ç”¨`update`æŸ¥è¯¢åˆ›å»ºçš„è®°å½•æ·»åŠ å‡ æ¡æ³¨é‡Šã€‚è°ƒæ•´`main`åŠŸèƒ½å¦‚ä¸‹ï¼š

<SwitchTech technologies={['typescript', '*']}>

```ts file=index.ts copy
async function main() {
  await prisma.post.update({
    where: {
      slug: 'my-first-post',
    },
    data: {
      comments: {
        createMany: {
          data: [
            { comment: 'Great post!' },
            { comment: "Can't wait to read more!" },
          ],
        },
      },
    },
  })
  const posts = await prisma.post.findMany({
    include: {
      comments: true,
    },
  })

  console.dir(posts, { depth: Infinity })
}
```

</SwitchTech>

<SwitchTech technologies={['node', '*']}>

```js file=index.js copy
async function main() {
  await prisma.post.update({
    where: {
      slug: 'my-first-post',
    },
    data: {
      comments: {
        createMany: {
          data: [
            { comment: 'Great post!' },
            { comment: "Can't wait to read more!" },
          ],
        },
      },
    },
  })
  const posts = await prisma.post.findMany({
    include: {
      comments: true,
    },
  })

  console.dir(posts, { depth: Infinity })
}
```

</SwitchTech>

<SwitchTech technologies={['typescript', '*']}>

ç°åœ¨ä½¿ç”¨ä¸ä¹‹å‰ç›¸åŒçš„å‘½ä»¤è¿è¡Œä»£ç ï¼š

```terminal copy
npx ts-node index.ts
```

</SwitchTech>

<SwitchTech technologies={['node', '*']}>

ç°åœ¨ä½¿ç”¨ä¸ä¹‹å‰ç›¸åŒçš„å‘½ä»¤è¿è¡Œä»£ç ï¼š

```terminal copy
node index.js
```

</SwitchTech>

æ‚¨å°†çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºï¼š

```json5 no-lines
[
  {
    id: '60cc9bad005059d6007f45dd',
    slug: 'my-first-post',
    title: 'My first post',
    body: 'Lots of really interesting stuff',
    userId: '60cc9b0e001e3bfd00a6eddf',
    comments: [
      {
        id: '60cca420008a21d800578793',
        postId: '60cca40300af8bf000f6ca99',
        comment: 'Great post!',
      },
      {
        id: '60cca420008a21d800578794',
        postId: '60cca40300af8bf000f6ca99',
        comment: "Can't wait to try this!",
      },
    ],
  },
]
```

å¤ªæ£’äº†ï¼Œæ‚¨ç¬¬ä¸€æ¬¡ä½¿ç”¨ Prisma Client å°†æ–°æ•°æ®å†™å…¥æ•°æ®åº“ ğŸš€

<SwitchTech technologies={['node', 'mongodb']}>

<NavigationLinksContainer>

<ButtonLink
  color="dark"
  type="primary"
  href="./install-prisma-client-node-mongodb"
  arrowLeft
>
  å®‰è£… Prisma å®¢æˆ·ç«¯
</ButtonLink>

<ButtonLink color="dark" type="primary" href="./next-steps-node-mongodb" arrow>
  ä¸‹ä¸€æ­¥
</ButtonLink>

</NavigationLinksContainer>

</SwitchTech>

<SwitchTech technologies={['typescript', 'mongodb']}>

<NavigationLinksContainer>

<ButtonLink
  color="dark"
  type="primary"
  href="./install-prisma-client-typescript-mongodb"
  arrowLeft
>
  å®‰è£… Prisma å®¢æˆ·ç«¯
</ButtonLink>

<ButtonLink
  color="dark"
  type="primary"
  href="./next-steps-typescript-mongodb"
  arrow
>
  ä¸‹ä¸€æ­¥
</ButtonLink>

</NavigationLinksContainer>

</SwitchTech>
