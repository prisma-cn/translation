---
title: 'Prisma schema'
metaTitle: 'Prisma schema API (参考)'
metaDescription: 'Prisma Schema Language (PSL) API 参考'
tocDepth: 2
toc: true
---

## <inlinecode>数据源（datasource）</inlinecode>

在 Prisma schema 中定义 [数据源](../../concepts/components/prisma-schema/data-sources) <span class="concept"></span>。

### 字段

`datasource` 接受以下字段:

| 字段名              | 必选   | 类型                                                             | 描述                                                                                                           |
| ------------------- | ------ | ---------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------- |
| `provider`          | **是** | String (`postgresql`, `mysql`, `sqlite`, `sqlserver`, `mongodb`) | 要使用的数据源连接器。                                                                                         |
| `url`               | **是** | String (URL)                                                     | 包括身份验证信息的连接串。 大多数连接器使用 [数据库提供的语法](../database-reference/connection-urls#format)。 |
| `shadowDatabaseUrl` | 否     | String (URL)                                                     | Prisma Migrate 使用的影子数据库的连接 URL。允许您使用云托管数据库作为影子数据库。                              |

现有以下提供者（provider）可供选择：

- `sqlite`
- `postgresql`
- `mysql`
- [`sqlserver` (预览)](../../../concepts/components/preview-features/sql-server#enable-sql-server-preview-feature)
- `mongodb` (预览)

### 注意

- 一个 schema 只能有一个 `datasource` 字段。
- `datasource db` 只是习惯用法，您可以为数据源指定任何名称 — 例如，`datasource mysql` 或 `datasource data`。

### 示例

#### 定义 PostgreSQL 数据源

数据库连接凭据：

- User: `johndoe`
- Password: `mypassword`
- Host: `localhost`
- Post: `5432`
- Database name: `mydb`
- Schema name: `public`

```prisma
datasource db {
  provider = "postgresql"
  url      = "postgresql://johndoe:mypassword@localhost:5432/mydb?schema=public"
}
```

查看更多关于 PostgreSQL 连接串的用法，参见 [此处](../../../concepts/database-connectors/postgresql) 。

#### 定义 MySQL 数据源

数据库连接凭据：

- User: `johndoe`
- Password: `mypassword`
- Host: `localhost`
- Post: `3306`
- Database name: `mydb`

```prisma
datasource db {
  provider = "mysql"
  url      = "mysql://johndoe:mypassword@localhost:3306/mydb"
}
```

查看更多关于 MySQL 连接串的用法，参见 [此处](../../../concepts/database-connectors/mysql).

#### 定义 MongoDB 数据源

- User: `root`
- Password: `password`
- Host: `cluster1.test1.mongodb.net`
- Port: N/A
- Database name: `testing`

```prisma
datasource db {
  provider = "mongodb"
  url      = "mongodb+srv://root:password@cluster1.test1.mongodb.net/testing?retryWrites=true&w=majority"
}
```

查看更多关于 MongoDB 连接串的用法，参见 [此处](../../../concepts/database-connectors/mongodb).

#### 定义 SQLite 数据源

数据库文件为 `dev.db`:

```prisma
datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}
```

查看更多关于 SQLite 连接串的用法，参见 [此处](../../../concepts/database-connectors/sqlite).

#### 通过环境变量定义 PostgreSQL 数据源

连接凭据：

- User: `johndoe`
- Password: `mypassword`
- Host: `localhost`
- Post: `5432`
- Database name: `mydb`
- Schema name: `public`

```prisma
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}
```

运行需要数据库连接串 的 Prisma CLI 命令时（例如 `prisma generate`），请确保设置了 `DATABASE_URL` 环境变量。

可以创建包含以下内容的 [`.env`](https://github.com/motdotla/dotenv) 文件。该文件必须与 `schema.prisma` 文件位于同一目录下，才能被 Prisma CLI 引用。

```
DATABASE_URL=postgresql://johndoe:mypassword@localhost:5432/mydb?schema=public
```

## <inlinecode>生成器（generator）</inlinecode>

<AlgoliaTerm name="apiReference" value="generator" />

在 Prisma schema 中定义 [生成器](../../concepts/components/prisma-schema/generators) <span class="concept"></span>。

### 字段

`generator` 接受以下字段:

| 字段名            | 必选   | 类型                                            | 描述                                                                                      |
| ----------------- | ------ | ----------------------------------------------- | ----------------------------------------------------------------------------------------- |
| `provider`        | **是** | String (file path) or Enum (`prisma-client-js`) | 要使用的 generator。这可以指向实现 generator 的文件，也可以直接指定内置 generator。       |
| `output`          | 否     | String (file path)                              | 生成 client 文件的保存路径, [详见](). **默认值**: `node_modules/.prisma/client`           |
| `binaryTargets`   | 否     | List of Enums (see below)                       | 指定运行 Prisma 客户端的操作系统，以确保[查询引擎]()的二进制兼容性。 **默认值**: `native` |
| `previewFeatures` | 否     | List of Enums                                   | 使用智能提示查看当前可用的预览功能（Visual Studio Code 快捷键 `Ctrl+Space`）。            |

#### <inlinecode>binaryTargets</inlinecode> 选项

下表列出了所有支持的操作系统以及需要在 `binaryTargets` 中指定的对应二进制文件名称。

##### Mac OS

| Build OS | Prisma 引擎 build 名 |
| :------- | :------------------- |
| Mac OS   | `darwin`             |

##### Windows

| Build OS | Prisma 引擎 build 名 |
| :------- | :------------------- |
| Windows  | `windows`            |

##### Linux (Alpine)

| Build OS | Prisma 引擎 build 名 |
| :------- | :------------------- |
| Alpine   | `linux-musl`         |

##### Linux (Debian)

| Build OS             | Prisma 引擎 build 名   | OpenSSL |
| :------------------- | :--------------------- | :-----: |
| Debian 8 (Jessie)    | `debian-openssl-1.0.x` |  1.0.x  |
| Debian 9 (Stretch)   | `debian-openssl-1.1.x` |  1.1.x  |
| Debian 10 (Buster)   | `debian-openssl-1.1.x` |  1.1.x  |
| Debian 11 (Bullseye) | `debian-openssl-1.1.x` |  1.1.x  |

##### Linux (Ubuntu)

| Build OS              | Prisma 引擎 build 名   | OpenSSL |
| :-------------------- | :--------------------- | :-----: |
| Ubuntu 14.04 (trusty) | `debian-openssl-1.0.x` |  1.0.x  |
| Ubuntu 16.04 (xenial) | `debian-openssl-1.0.x` |  1.0.x  |
| Ubuntu 18.04 (bionic) | `debian-openssl-1.1.x` |  1.1.x  |
| Ubuntu 19.04 (disco)  | `debian-openssl-1.1.x` |  1.1.x  |
| Ubuntu 20.04 (focal)  | `debian-openssl-1.1.x` |  1.1.x  |

##### Linux (CentOS)

| Build OS | Prisma 引擎 build 名 | OpenSSL |
| :------- | :------------------- | :-----: |
| CentOS 7 | `rhel-openssl-1.0.x` |  1.0.x  |
| CentOS   | `rhel-openssl-1.0.x` |  1.0.x  |

##### Linux (Fedora)

| Build OS  | Prisma 引擎 build 名 | OpenSSL |
| :-------- | :------------------- | :-----: |
| Fedora 28 | `rhel-openssl-1.1.x` |  1.1.x  |
| Fedora 29 | `rhel-openssl-1.1.x` |  1.1.x  |
| Fedora 30 | `rhel-openssl-1.1.x` |  1.1.x  |

##### Linux (Linux Mint)

| Build OS      | Prisma 引擎 build 名   | OpenSSL |
| :------------ | :--------------------- | :-----: |
| Linux Mint 18 | `debian-openssl-1.0.x` |  1.0.x  |
| Linux Mint 19 | `debian-openssl-1.1.x` |  1.1.x  |

##### Linux (Arch Linux)

| Build OS              | Prisma 引擎 build 名   | OpenSSL |
| :-------------------- | :--------------------- | :-----: |
| Arch Linux 2019.09.01 | `debian-openssl-1.1.x` |  1.1.x  |

##### Linux ARM64

| Build OS                 | Prisma 引擎 build 名      | OpenSSL |
| :----------------------- | :------------------------ | :-----: |
| Linux ARM64-based distro | `linux-arm-openssl-1.0.x` |  1.0.x  |
| Linux ARM64-based distro | `linux-arm-openssl-1.1.x` |  1.1.x  |

### 示例

#### 使用 `prisma-client-js` 生成器默认的 `output` 和 `binaryTargets`

```prisma
generator client {
  provider = "prisma-client-js"
}
```

注意，上面的 `generator` 定义使用默认的 `output` 和 `binaryTargets`， 和以下定义**等价**：

```prisma
generator client {
  provider      = "prisma-client-js"
  output        = "node_modules/.prisma/client"
  binaryTargets = ["native"]
}
```

#### 自定义 Prisma Client 文件的保存路径

<details><summary>示例</summary>

```prisma
generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/client"
}
```

</details>

#### 指定 `binaryTargets` 以确保系统兼容性

下面是在 `Ubuntu 19.04 (disco)` 系统配置 Prisma Client 的示例，参照[以上](#linux-ubuntu)。

```prisma
generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["debian-openssl-1.1.x"]
}
```

#### 为 `provider` 配置自定义 generator 实现

以下示例指定 `my-generator` 文件夹作为自定义 generator 的存储路径

```prisma
generator client {
  provider = "./my-generator"
}
```

## <inlinecode>模型（model）</inlinecode>

定义一个 Prisma [模型](../../concepts/components/prisma-schema/data-model#defining-models) <span class="concept"></span>.

### 注意

- Model 的每个记录都必须是唯一可识别的。每个 Model 必须至少定义以下一个属性：:
  - [`@unique`](#unique)
  - [`@@unique`](#unique-1)
  - [`@id`](#id)
  - [`@@id`](#id-1)

#### 命名规范

- Model 名称必须满足以下正则表达式: `[A-Za-z][A-Za-z0-9_]*`
- Model 名称必须以字母开头，通常采用 [PascalCase](https://wiki.c2.com/?PascalCase) 命名方式。
- Model 名称应使用单数形式 (例如，使用 `User` 而不是 `user`、`users` 或者 `Users`)
- Prisma 有一些**保留字**仅供 Prisma 内部使用，因此不能用作模型名称。您可以在 <a href="https://github.com/prisma/prisma/blob/master/src/packages/client/src/generation/generateClient.ts#L362">这里</a> 和 [这里](https://github.com/prisma/prisma-engines/blob/master/libs/datamodel/core/src/transform/ast_to_dml/reserved_model_names.rs#L10)查看这些保留字。

> **提示**: 您可以使用 [`@@map`属性](#map-1) 将模型（例如，`User`）映射到具有与模型命名约定不匹配的其他名称的表（例如，`users`）。

#### 字段顺序

- 在版本 2.3.0 及更高版本中，内省产生的模型字段的顺序与数据库中列的顺序相同。关系字段在标量字段之后。

### 示例

#### 带有两个标量字段的名为 `User` 的模型

<TabbedContent tabs={[<FileWithIcon text="关系型数据库" icon="database"/>, <FileWithIcon text="MongoDB" icon="database"/>]}>
<tab>

```prisma
model User {
  email String  @unique // `email` 不能为定义为可选类型，因为它是模型里仅有的唯一约束字段
  name  String?
}
```

</tab>
<tab>

```prisma
model User {
  id    String  @default(dbgenerated()) @map("_id") @db.ObjectId
  email String  @unique
  name  String?
}
```

</tab>
</TabbedContent>

## <inlinecode>model</inlinecode> 字段

[字段](../../../concepts/components/prisma-schema/data-model#defining-fields) <span class="concept"></span> 为模型的属性。

### 注意

#### 命名规范

- 必须以字母开头
- 通常采用 小驼峰（camelCase）规范命名
- 必须满足以下正则表达式: `[A-Za-z][A-Za-z0-9_]*`

> **提示**: 您可以使用[`@map`属性]（#map）将字段名（例如，`MyField`）映射到具有与字段命名约定不匹配的其他名称（例如，`MyField`）的列。

## <inlinecode>model</inlinecode> 字段标量类型

*数据源连接器*决定每个 Prisma 标量类型映射到的*数据库原生类型*。*generator*决定这些类型映射到*目标编程语言中的什么类型*。

Prisma models 也可以通过 [model field types](../../../../concepts/components/prisma-schema/relations) <span class="concept"></span> 来指定 model 之间的关系。

### <inlinecode>String</inlinecode>

可变长度文本。

#### 默认类型映射

| Connector     | 默认映射         |
| ------------- | ---------------- |
| PostgreSQL    | `text`           |
| Microsoft SQL | `nvarchar(1000)` |
| MySQL         | `varchar(191)`   |
| MongoDB       | `String`         |
| SQLite        | `TEXT`           |

#### PostgreSQL

| 数据库原生类型 | 数据库原生类型属性 | 备注                                                                                                                                                 |
| :------------- | :----------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------- |
| `text`         | `@db.Text`         |                                                                                                                                                      |
| `char`         | `@db.Char(x)`      |
| `varchar`      | `@db.VarChar(n)`   |
| `bit`          | `@db.Bit(x)`       |
| `varbit`       | `@db.VarBit`       |
| `uuid`         | `@db.Uuid`         |
| `xml`          | `@db.Xml`          |
| `inet`         | `@db.Inet`         |
| `citext`       | `@db.Citext`       | 需要启用 [Citext 扩展](../../../concepts/components/prisma-schema/features-without-psl-equivalent#enable-extensions-for-native-database-functions)。 |

#### MySQL

| 数据库原生类型 | 数据库原生类型属性 | 备注 |
| :------------- | :----------------- | ---- |
| `VARCHAR`      | `@db.VarChar(X)`   |      |
| `TEXT`         | `@db.Text`         |
| `CHAR`         | `@db.Char(X)`      |
| `TINYTEXT`     | `@db.TinyText`     |
| `MEDIUMTEXT`   | `@db.MediumText`   |
| `LONGTEXT`     | `@db.LongText`     |

可以使用 Prisma Migrate 将 `@db.Bit(1)` 映射为 `String`:

```prisma
model Model {
  /* ... */
  myField String @db.Bit(1)
}
```

#### MongoDB (预览)

`String`

| 数据库原生类型属性 | 备注                                                         |
| :----------------- | :----------------------------------------------------------- |
| `@db.String`       |                                                              |
| `@db.ObjectId`     | 如果 BSON 类型为“OBJECT_ID”（ID 字段、关系标量），则为必填项 |

#### SQL Server (预览)

| 数据库原生类型     | 数据库原生类型属性     | Notes |
| :----------------- | :--------------------- | ----- |
| `char`             | `@db.Char(X)`          |
| `nchar`            | `@db.NChar(X)`         |
| `varchar`          | `@db.VarChar(X)`       |
| `nvarchar`         | `@db.NVarChar(X)`      |       |
| `text`             | `@db.Text`             |
| `ntext`            | `@db.NText`            |
| `xml`              | `@db.Xml`              |
| `uniqueidentifier` | `@db.UniqueIdentifier` |

#### SQLite

`TEXT`

#### Clients

| Prisma Client JS |
| ---------------- |
| `string`         |

### <inlinecode>Boolean</inlinecode>

布尔类型。

#### 默认类型映射

| Connector     | 默认映射     |
| ------------- | ------------ |
| PostgreSQL    | `boolean`    |
| Microsoft SQL | `tinyint`    |
| MySQL         | `TINYINT(1)` |
| MongoDB       | `Bool`       |
| SQLite        | `INTEGER`    |

#### PostgreSQL

| 数据库原生类型 | 数据库原生类型属性 | 备注 |
| :------------- | :----------------- | ---- |
| `boolean`      | `@db.Boolean`      |      |

#### MySQL

| 数据库原生类型 | 数据库原生类型属性 | 备注                                                                                                  |
| -------------- | ------------------ | ----------------------------------------------------------------------------------------------------- |
| `TINYINT(1)`   | `@db.TinyInt(1)`   | 如果最大长度大于 1（例如，`TINYINT（2）`） _或_ 默认值不是`1`、`0`或`NULL`，则 `TINYINT` 映射为 `Int` |
| `BIT(1)`       | `@db.Bit`          |

#### MongoDB (预览)

`Bool`

#### SQL Server (预览)

| 数据库原生类型 | 数据库原生类型属性 | 备注 |
| :------------- | :----------------- | ---- |
| `tinyint`      | `@db.TinyInt`      |      |

#### SQLite

`INTEGER`

#### Clients

| Prisma Client JS |
| ---------------- |
| `boolean`        |

### <inlinecode>Int</inlinecode>

#### 默认类型映射

| Connector     | 默认映射  |
| ------------- | --------- |
| PostgreSQL    | `integer` |
| Microsoft SQL | `int`     |
| MySQL         | `INT`     |
| MongoDB       | `Int`     |
| SQLite        | `INTEGER` |

#### PostgreSQL

| 数据库原生类型             | 数据库原生类型属性                       | 备注 |
| -------------------------- | ---------------------------------------- | ---- |
| `integer` \| `int`, `int4` | `@db.Integer`                            |      |
| `smallint` \| `int2`       | `@db.SmallInt`                           |      |
| `smallserial` \| `serial2` | `@db.SmallInt @default(autoincrement())` |
| `serial` \| `serial4`      | `@db.Int @default(autoincrement())`      |
| `oid`                      | `@db.Oid`                                |

#### MySQL

| 数据库原生类型       | 数据库原生类型属性      | 备注                                                                                                                                    |
| :------------------- | :---------------------- | --------------------------------------------------------------------------------------------------------------------------------------- |
| `INT`                | `@db.Int`               |                                                                                                                                         |
| `INT UNSIGNED`       | `@db.UnsignedInt`       |                                                                                                                                         |
| `SMALLINT`           | `@db.SmallInt`          |
| `SMALLINT UNSIGNED`  | `@db.UnsignedSmallInt`  |
| `MEDIUMINT`          | `@db.MediumInt`         |
| `MEDIUMINT UNSIGNED` | `@db.UnsignedMediumInt` |
| `TINYINT`            | `@db.TinyInt`           | 如果最大长度大于 1（例如，`TINYINT（2）`） _或_ 默认值不是`1`、`0`或`NULL`，则 `TINYINT` 映射为 `Int`。 `TINYINT(1)` 映射为 `Boolean`。 |
| `TINYINT UNSIGNED`   | `@db.UnsignedTinyInt`   | `TINYINT(1) UNSIGNED` 将映射为 `Int` 而不是 `Boolean`                                                                                   |
| `YEAR`               | `@db.Year`              |

#### MongoDB (预览)

`Int`

| 数据库原生类型属性 | 备注 |
| :----------------- | :--- |
| `@db.Int`          |      |
| `@db.Long`         |      |

#### SQL Server (预览)

| 数据库原生类型 | 数据库原生类型属性 | 备注 |
| -------------- | ------------------ | ---- |
| `int`          | `@db.Int`          |      |
| `smallint`     | `@db.SmallInt`     |      |
| `tinyint`      | `@db.TinyInt`      |      |

#### SQLite

`INTEGER`

#### Clients

| Prisma Client JS |
| ---------------- |
| `number`         |

### <inlinecode>BigInt</inlinecode>

自版本 [2.17.0](https://github.com/prisma/prisma/releases/tag/2.17.0) 开始支持 `BigInt`。

#### 默认类型映射

| Connector     | 默认映射  |
| ------------- | --------- |
| PostgreSQL    | `integer` |
| Microsoft SQL | `int`     |
| MySQL         | `INT`     |
| MongoDB       | `Long`    |
| SQLite        | `INTEGER` |

#### PostgreSQL

| 数据库原生类型           | 数据库原生类型属性                     | 备注 |
| ------------------------ | -------------------------------------- | ---- |
| `bigint` \| `int8`       | `@db.BigInt`                           |      |
| `bigserial` \| `serial8` | `@db.BigInt @default(autoincrement())` |      |

#### MySQL

| 数据库原生类型 | 数据库原生类型属性                             | 备注 |
| -------------- | ---------------------------------------------- | ---- |
| `BIGINT`       | `@db.BigInt`                                   |      |
| `SERIAL`       | `@db.UnsignedBigInt @default(autoincrement())` |      |

#### MongoDB (预览)

`Long`

#### SQL Server (预览)

| 数据库原生类型 | 数据库原生类型属性 | 备注 |
| -------------- | ------------------ | ---- |
| `bigint`       | `@db.BigInt`       |      |

#### SQLite

`INTEGER`

#### Clients

| Client           | 类型                                                                                                | 描述                                                                                                     |
| :--------------- | :-------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------------- |
| Prisma Client JS | [`BigInt`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt) | 查看 [`BigInt`使用示例](../../concepts/components/prisma-client/working-with-fields#working-with-bigint) |

### <inlinecode>Float</inlinecode>

浮点数。

> 自版本 [2.17.0](https://github.com/prisma/prisma/releases/tag/2.17.0) `Float` 映射为 `Double` - 查看 [release notes](https://github.com/prisma/prisma/releases/tag/2.17.0) 和 [视频: Changes to the default mapping of Float in Prisma 2.17.0](https://www.youtube.com/watch?v=OsuGP_xNHco&amp%3Bab_channel=Prisma) 了解更多.

#### 默认类型映射

| Connector     | 默认映射           |
| ------------- | ------------------ |
| PostgreSQL    | `double precision` |
| Microsoft SQL | `float(53)`        |
| MySQL         | `DOUBLE`           |
| MongoDB       | `Double`           |
| SQLite        | `REAL`             |

#### PostgreSQL

| 数据库原生类型     | 数据库原生类型属性    | 备注 |
| ------------------ | --------------------- | ---- |
| `double precision` | `@db.DoublePrecision` |
| `real`             | `@db.Real`            |

#### MySQL

| 数据库原生类型 | 数据库原生类型属性 | 备注 |
| -------------- | ------------------ | ---- |
| `FLOAT`        | `@db.Float`        |
| `DOUBLE`       | `@db.Double`       |

#### MongoDB (预览)

`Double`

#### SQL Server (预览)

| 数据库原生类型 | 数据库原生类型属性 |
| -------------- | ------------------ |
| `float`        | `@db.Float`        |
| `money`        | `@db.Money`        |
| `smallmoney`   | `@db.SmallMoney`   |
| `real`         | `@db.Real`         |

#### SQLite connector

`REAL`

#### Clients

| Prisma Client JS |
| ---------------- |
| `number`         |

### <inlinecode>Decimal</inlinecode>

#### 默认类型映射

| Connector     | 默认映射         |
| ------------- | ---------------- |
| PostgreSQL    | `decimal(65,30)` |
| Microsoft SQL | `decimal(32,16)` |
| MySQL         | `DECIMAL(65,30)` |
| MongoDB       | `Decimal`        |
| SQLite        | `DECIMAL`        |

#### PostgreSQL

| 数据库原生类型         | 数据库原生类型属性  | Notes |
| ---------------------- | ------------------- | ----- |
| `decimal` \| `numeric` | `@db.Decimal(X, Y)` |       |
| `money`                | `@db.Money`         |

#### MySQL

| 数据库原生类型         | 数据库原生类型属性  | Notes |
| ---------------------- | ------------------- | ----- |
| `DECIMAL` \| `NUMERIC` | `@db.Decimal(X, Y)` |       |

#### MongoDB (预览)

`Decimal`

#### SQL Server (预览)

| 数据库原生类型         | 数据库原生类型属性  | 备注 |
| ---------------------- | ------------------- | ---- |
| `decimal` \| `numeric` | `@db.Decimal(X, Y)` |      |

#### SQLite

`DECIMAL` (2.17.0 及以前为`REAL`)

#### Clients

| Client           | Type                                               | Description                                                                                                |
| :--------------- | :------------------------------------------------- | :--------------------------------------------------------------------------------------------------------- |
| Prisma Client JS | [`Decimal`](https://mikemcl.github.io/decimal.js/) | 查看 [`Decimal`使用示例](../../concepts/components/prisma-client/working-with-fields#working-with-decimal) |

### <inlinecode>DateTime</inlinecode>

#### 提示

- Prisma Client 以 ISO 8601 格式字符串的形式返回所有 `DateTime`。

#### 默认类型映射

| Connector     | 默认映射       |
| ------------- | -------------- |
| PostgreSQL    | `timestamp(3)` |
| Microsoft SQL | `datetime2`    |
| MySQL         | `DATETIME(3)`  |
| MongoDB       | `Timestamp`    |
| SQLite        | `NUMERIC`      |

#### PostgreSQL

| 数据库原生类型 | 数据库原生类型属性   | 备注 |
| -------------- | -------------------- | ---- |
| `timestamp`    | `@db.Timestamp(x)`   |      |
| `timestamptz`  | `@db.Timestamptz(x)` |
| `date`         | `@db.Date`           |
| `time`         | `@db.Time(x)`        |
| `timetz`       | `@db.Timetz(x)`      |

#### MySQL

| 数据库原生类型 | 数据库原生类型属性 | 备注 |
| -------------- | ------------------ | ---- |
| `DATETIME(x)`  | `@db.DateTime(x)`  |      |
| `DATE(x)`      | `@db.Date(x)`      |
| `TIME(x)`      | `@db.Time(x)`      |
| `TIMESTAMP(x)` | `@db.Timestamp(x)` |

您还可以将 MySQL 的 `YEAR` 类型与 `Int` 一起使用：

```prisma
yearField     Int    @db.Year
```

#### MongoDB (预览)

`Timestamp`

#### SQL Server (预览)

| 数据库原生类型   | 数据库原生类型属性   | 备注 |
| ---------------- | -------------------- | ---- |
| `date`           | `@db.Date`           |
| `time`           | `@db.Time`           |
| `datetime`       | `@db.DateTime`       |
| `datetime2`      | `@db.DateTime2`      |      |
| `smalldatetime`  | `@db.SmallDateTime`  |
| `datetimeoffset` | `@db.DateTimeOffset` |

#### SQLite

`NUMERIC` 或 `STRING`。 如果底层数据类型是 `STRING`，必须符合以下任意一种格式:

- [RFC 3339](https://www.ietf.org/rfc/rfc3339.txt) (`1996-12-19T16:39:57-08:00`)
- [RFC 2822](https://tools.ietf.org/html/rfc2822#section-3.3) (`Tue, 1 Jul 2003 10:52:37 +0200`)

#### Clients

| Prisma Client JS |
| ---------------- |
| `Date`           |

### <inlinecode>Json</inlinecode>

JSON 对象。

#### 默认类型映射

| Connector     | 默认映射                                                                                           |
| ------------- | -------------------------------------------------------------------------------------------------- |
| PostgreSQL    | `jsonb`                                                                                            |
| Microsoft SQL | `nvarchar(1000)`                                                                                   |
| MySQL         | `JSON`                                                                                             |
| MongoDB       | [有效的 `BSON` 对象（松散模式）](https://docs.mongodb.com/manual/reference/mongodb-extended-json/) |
| SQLite        | Not supported                                                                                      |

#### PostgreSQL

| 数据库原生类型 | 数据库原生类型属性 | 备注 |
| -------------- | ------------------ | ---- |
| `json`         | `@db.Json`         |
| `jsonb`        | `@db.JsonB`        |      |

#### MySQL

| 数据库原生类型 | 数据库原生类型属性 | 备注 |
| -------------- | ------------------ | ---- |
| `JSON`         | `@db.Json`         |

#### MongoDB (预览)

[有效的 `BSON` 对象 (松散模式)](https://docs.mongodb.com/manual/reference/mongodb-extended-json/)

#### SQL Server (预览)

SQL Server 没有内置 JSON 数据类型 - 但是，有许多[用于读取和修改 JSON 的内置函数](https://docs.microsoft.com/en-us/sql/relational-databases/json/json-data-sql-server?view=sql-server-ver15#extract-values-from-json-text-and-use-them-in-queries)

| 数据库原生类型 | 数据库原生类型属性   |
| -------------- | -------------------- |
| `JSON`         | `@db.NVarChar(1000)` |

#### SQLite

暂不支持。

#### Clients

| Prisma Client JS |
| ---------------- |
| `object`         |

### <inlinecode>Bytes</inlinecode>

自 [2.17.0](https://github.com/prisma/prisma/releases/tag/2.17.0) 开始支持 `Bytes`。

#### 默认类型映射

| Connector     | 默认映射      |
| ------------- | ------------- |
| PostgreSQL    | `bytea`       |
| Microsoft SQL | `varbinary`   |
| MySQL         | `LONGBLOB`    |
| MongoDB       | `BinData`     |
| SQLite        | Not supported |

#### PostgreSQL

| 数据库原生类型 | 数据库原生类型属性 |
| -------------- | ------------------ |
| `bytea`        | `@db.ByteA`        |

#### MySQL

| 数据库原生类型 | 数据库原生类型属性 | 备注 |
| -------------- | ------------------ | ---- |
| `LONGBLOB`     | `@db.LongBlob`     |      |
| `BINARY`       | `@db.Binary`       |
| `VARBINARY`    | `@db.VarBinary`    |
| `TINYBLOB`     | `@db.TinyBlob`     |
| `BLOB`         | `@db.Blob`         |
| `MEDIUMBLOB`   | `@db.MediumBlob`   |
| `BIT`          | `@db.Bit`          |

#### MongoDB (预览)

`BinData`

| 数据库原生类型属性 | 备注                                                                              |
| :----------------- | :-------------------------------------------------------------------------------- |
| `@db.ObjectId`     | Required if the underlying BSON type is `OBJECT_ID` (ID fields, relation scalars) |
| `@db.BinData`      |                                                                                   |

#### SQL Server (预览)

| 数据库原生类型 | 数据库原生类型属性 | 备注 |
| -------------- | ------------------ | ---- |
| `binary`       | `@db.Binary`       |
| `varbinary`    | `@db.VarBinary`    |      |
| `image`        | `@db.Image`        |
| `bit`          | `@db.Bit`          |

#### SQLite

暂不支持。

#### Clients

| Client           | Type                                           | Description                                                                                             |
| :--------------- | :--------------------------------------------- | :------------------------------------------------------------------------------------------------------ |
| Prisma Client JS | [`Buffer`](https://nodejs.org/api/buffer.html) | 查看 [`Buffer`使用示例](../../concepts/components/prisma-client/working-with-fields#working-with-bytes) |

### <inlinecode>Unsupported</inlinecode>

<Admonition type="warning">

**不支持 MongoDB** <br />
[MongoDB connector](../../concepts/database-connectors/mongodb) 暂不支持 `Unsupported` 类型。

</Admonition>

[2.17.0](https://github.com/prisma/prisma/releases/tag/2.17.0) 中引入了 `Unsupported` 类型。 允许您在 Prisma 模式中表示 Prisma Client 不支持的数据类型。 `Unsupported` 字段可以使用 `prisma db pull` 进行内省，也可以使用 Prisma Migrate 或 `db push` 创建。

#### 注意

- 生成的 Client 中没有 `Unsupported` 类型的字段
- 如果模型包含 **强制** `Unsupported` 类型，则 Client 中不能使用 `prisma.model.create（..）` 和 `prisma.model.update（…）`。
- Prisma 将在 `内省` 时始终警告您的架构包含不支持的类型：

  ```
  *** 警告 ***

  Prisma Client 不支持这些字段，因为Prisma当前不支持其类型。
  * 模型 "Post", 字段: "circle", 原始数据类型: "circle"
  ```

#### 示例

<TabbedContent tabs={[<FileWithIcon text="仅限关系数据库" icon="database"/>]}>
<tab>

```prisma
model Star {
  id       Int                    @id @default(autoincrement())
  position Unsupported("circle")?
  example1 Unsupported("circle")
  circle   Unsupported("circle")? @default(dbgenerated("'<(10,4),11>'::circle"))
}
```

</tab>
<tab>
</tab>

</TabbedContent>

## <inlinecode>model</inlinecode> 字段修饰符

### <inlinecode>[]</inlinecode> 修饰符

使字段成为列表。

#### 注意

- 不支持可选类型 (例如 `Post[]?`).

##### 关系数据库

- 仅当数据库原生支持标量列表（数组）时，数据模型中才支持标量列表（数组）。因此，目前只有在使用 PostgreSQL 时才支持标量列表（因为 MySQL 和 SQLite 不支持原生标量列表）。

##### MongoDB

- 标量列表需要 `@db.Array(String)`，其中参数与标量类型匹配（例如，`String[]`）

#### 示例

<TabbedContent tabs={[<FileWithIcon text="关系数据库" icon="database"/>, <FileWithIcon text="MongoDB" icon="database"/>]}>
<tab>

```prisma highlight=3;normal
model User {
  id             Int      @id @default(autoincrement())
  posts          Post[]
  favoriteColors String[]
}
```

</tab>
<tab>

```prisma highlight=3;normal
model User {
  id             String   @id @default(dbgenerated()) @map("_id") @db.ObjectId
  posts          Post[]
  favoriteColors String[] @db.Array(String)
}
```

</tab>
</TabbedContent>

### <inlinecode>?</inlinecode> 修饰符

使字段成为可选字段。

#### 注意

- 不能用在列表类型 (例如, `Posts[]`)

#### 示例

##### 可选的 `name` 字段

```prisma highlight=3;normal
model User {
  id   Int     @id @default(autoincrement())
  name String?
}
```

## 属性

属性修改[字段](#model-fields)或块（例如 [models](#model)）的行为。有两种方法可以向数据模型添加属性：

- _字段_ 使用前缀 `@`
- _块_ 使用前缀 `@@`

有些属性可以带参数并且参数必须有参数名，但在大多数情况下，可以忽略*参数名*。

> **提示**: 签名中的前导下划线（*）表示可以省略*参数名\_。

### <inlinecode>@id</inlinecode>

<AlgoliaTerm name="apiReference" value="@id" />

在模型上定义单个字段 ID。

#### 注意

##### 通常情况下

- 不能定义在关系字段上
- 不能是可选的

##### 关系数据库

- 对应的数据库类型： `PRIMARY KEY`
- Can be annotated with a [`@default()`](#default) value that uses [函数](#attribute-functions) to auto-generate an ID:
  可以使用 [`@default()`](#default) 进行注解，该值使用 [函数](#attribute-functions) 自动生成 ID：

  - [`autoincrement()`](#autoincrement)
  - [`cuid()`](#cuid)
  - [`uuid()`](#uuid)

- 可以在任何标量字段上定义 (`String`, `Int`, `enum`)

##### MongoDB

- 对应的数据库类型： [除数组外的任意有效的 BSON 类型](https://docs.mongodb.com/manual/core/document/#the-_id-field)
- 每个模型必须定义一个 `@id` 字段
- [底层 ID 字段名始终是 `_id`](https://docs.mongodb.com/manual/core/document/#the-_id-field)，并且必须使用 `@map(_id)` 映射。
- 可以在任何标量字段（`String`、`Int`、`enum`）上定义，除非要在数据库中使用 `ObjectId`
- 使用 [`ObjectId`](https://docs.mongodb.com/manual/reference/method/ObjectId/) 作为 ID，必须满足：

  - 使用 `String` 或者 `Bytes` 字段类型。
  - 使用 `@db.ObjectId` 对字段修饰:

    ```prisma
    id   String  @db.ObjectId  @map("_id")
    ```

  - （可选），使用 [`@default()`](#default) 值对字段进行注释，该值使用 [`dbgenerated()` 函数](#dbgenerated) 自动生成 `ObjectId`

    ```prisma
    id   String  @db.ObjectId  @map("_id") @default(dbgenerated())
    ```

- 支持 [`cuid()`](#cuid) 和 [`uuid()`](#uuid)，但不生成有效的 `ObjectId` - 请使用 `dbgenerated（）` 代替 `id`
- **暂不支持** `autoincrement()`

#### 参数

N/A

#### 签名

```prisma no-lines
@id
```

#### 示例

In most cases, you want your database to create the ID. To do this, annotate the ID field with the `@default` attribute and initialize the field with a [函数](#attribute-functions).
在大多数情况下，您希望数据库创建 ID。为此，请使用 `@default` 属性装饰 ID 字段，并使用 [函数](#attribute-functions) 初始化该字段。

##### 使用整数自增 ID

<TabbedContent tabs={[<FileWithIcon text="仅限关系数据库" icon="database"/>]}>
<tab>

```prisma
model User {
  id   Int    @id @default(autoincrement())
  name String
}
```

</tab>
<tab>

</tab>
</TabbedContent>

##### 生成 `ObjectId` 作为 ID（仅限 MongoDB）

<TabbedContent tabs={[<FileWithIcon text="仅限MongoDB" icon="database"/>]}>
<tab>

```prisma
model User {
  id   String @id @default(dbgenerated()) @map("_id") @db.ObjectId
  name String
}
```

</tab>
<tab>

</tab>
</TabbedContent>

##### 生成 `cuid()` 作为 ID

<TabbedContent tabs={[<FileWithIcon text="仅限关系数据库" icon="database"/>, <FileWithIcon text="MongoDB" icon="database"/>]}>
<tab>

```prisma
model User {
  id   String @id @default(cuid())
  name String
}
```

</tab>
<tab>

```prisma
model User {
  id   String @id @default(cuid()) @map("_id")
  name String
}
```

<Admonition type="warning">

如果 `id` 字段的类型为 `ObjectId`，则不能使用 `cuid()` 生成默认值。使用以下语法生成有效的 `ObjectId`：

```prisma
id    String  @id @default(dbgenerated()) @db.ObjectId @map("_id")
```

</Admonition>

</tab>
</TabbedContent>

##### 生成 `uuid()` 作为 ID

<TabbedContent tabs={[<FileWithIcon text="关系数据库" icon="database"/>, <FileWithIcon text="MongoDB" icon="database"/>]}>

<tab>

```prisma
model User {
  id   String @id @default(uuid())
  name String
}
```

</tab>

<tab>

```prisma
model User {
  id   String @id @default(uuid()) @map("_id")
  name String
}
```

<Admonition type="warning">

如果 `id` 字段的类型为 `ObjectId`，则不能使用 `uuid()` 生成默认值。使用以下语法生成有效的 `ObjectId`：

```prisma
id    String  @id @default(dbgenerated()) @db.ObjectId @map("_id")
```

</Admonition>
</tab>

</TabbedContent>

##### *无默认值的*单字段 ID

在以下示例中，`id` 没有默认值：

<TabbedContent tabs={[<FileWithIcon text="关系数据库" icon="database"/>, <FileWithIcon text="MongoDB" icon="display"/>]}>
<tab>

```prisma
model User {
  id   String @id
  name String
}
```

</tab>
<tab>

```prisma
model User {
id    String   @id  @map("_id") @db.ObjectId
name  String
```

```prisma
model User {
id    String   @id  @map("_id")
name  String
```

</tab>
</TabbedContent>

注意，在上述情况下，在使用 Prisma Client 为 `User` 模型创建新记录时，您*必须*提供自己的 ID 值，例如：

```ts
const newUser = await prisma.user.create({
  data: {
    id: 1,
    name: 'Alice',
  },
})
```

###### 在不带默认值的关系标量字段上指定 ID

在下面的示例中，`authorId` 既是关系标量又是 `Profile` 的 ID：

<TabbedContent tabs={[<FileWithIcon text="关系数据库" icon="database"/>, <FileWithIcon text="MongoDB" icon="database"/>]}>
<tab>

```prisma
model Profile {
  authorId Int    @id
  author   User   @relation(fields: [authorId], references: [id])
  bio      String
}

model User {
  id      Int      @id
  email   String   @unique
  name    String?
  profile Profile?
}
```

</tab>
<tab>

```prisma
model Profile {
  authorId String @id @map("_id") @db.ObjectId
  author   User   @relation(fields: [authorId], references: [id])
  bio      String
}

model User {
  id      String   @id @map("_id") @db.ObjectId
  email   String   @unique
  name    String?
  profile Profile?
}
```

</tab>
</TabbedContent>

In this scenario, you cannot create a `Profile` only - you must use Prisma Client's [nested writes](../../concepts/components/prisma-client/relation-queries#nested-writes) create a `User` **or** connect the profile to an existing user.
在此场景中，您不能仅创建 `Profile` - 必须使用 Prisma Client 的[嵌套写入](../../concepts/components/prisma-client/relation-queries#nested-writes)创建`User` **或** 将 profile 连接到现有 user。

以下示例创建 user 和 profile：

```ts
const userWithProfile = await prisma.user.create({
  data: {
    id: 3,
    email: 'bob@prisma.io',
    name: 'Bob Prismo',
    profile: {
      create: {
        bio: "Hello, I'm Bob Prismo and I love apples, blue nail varnish, and the sound of buzzing mosquitoes.",
      },
    },
  },
})
```

以下示例将新创建 profile 连接到 user：

```ts
const profileWithUser = await prisma.profile.create({
  data: {
    bio: "Hello, I'm Bob and I like nothing at all. Just nothing.",
    author: {
      connect: {
        id: 22,
      },
    },
  },
})
```

### <inlinecode>@@id</inlinecode>

<Admonition type="warning">

**MongoDB 不支持** <br />
[MongoDB connector](../../concepts/database-connectors/mongodb) 不支持复合 ID.

</Admonition>

在模型上定义多字段 ID（复合 ID）。

#### 注意

- 对应数据库类型: `PRIMARY KEY`
- 可以使用 [`@default()`](#default) 值进行注释，该值使用 [函数](#attribute-functions) 自动生成 ID
- 不能是可选的
- 可以在任何标量字段上定义 (`String`, `Int`, `enum`)
- 无法在关系字段上定义
- Prisma Client 中复合 ID 字段的名称具有以下模式: `field1_field2_field3`

#### 参数

| 名称     | 必需   | 类型               | 描述                                            |
| -------- | ------ | ------------------ | ----------------------------------------------- |
| `fields` | **是** | `FieldReference[]` | 字段名数组 - 例如： `["firstname", "lastname"]` |

`@@id` 属性上的 `fields` 参数的名称可以省略：

```prisma no-lines
@@id(fields: [title, author])
@@id([title, author])
```

#### Signature

```ts no-lines
@@id(_ fields: FieldReference[])
```

##### Specify a multi-field ID on two `String` fields

<TabbedContent tabs={[<FileWithIcon text="仅限关系数据库" icon="database"/>]}>
<tab>

```prisma
model User {
  firstName String
  lastName  String
  email     String  @unique
  isAdmin   Boolean @default(false)

  @@id([firstName, lastName])
}
```

</tab>
<tab>
</tab>
</TabbedContent>

创建用户时，必须提供 `firstName` 和 `lastName` 的唯一组合：

<TabbedContent tabs={[<FileWithIcon text="仅限关系数据库" icon="database"/>]}>
<tab>

```ts
const user = await prisma.user.create({
  data: {
    firstName: 'Alice',
    lastName: 'Smith',
  },
})
```

</tab>
<tab>
</tab>
</TabbedContent>

要检索用户，请使用生成的复合 ID 字段（`firstName_lastName`）：

<TabbedContent tabs={[<FileWithIcon text="仅限关系数据库" icon="database"/>]}>
<tab>

```ts
const user = await prisma.user.findUnique({
  where: {
    firstName_lastName: {
      firstName: 'Alice',
      lastName: 'Smith',
    },
  },
})
```

</tab>
<tab>
</tab>
</TabbedContent>

##### 在两个 `String` 字段和一个 `Boolean` 字段上指定多字段 ID

<TabbedContent tabs={[<FileWithIcon text="仅限关系数据库" icon="database"/>]}>
<tab>

```prisma
model User {
  firstName String
  lastName  String
  email     String  @unique
  isAdmin   Boolean @default(false)

  @@id([firstName, lastName, isAdmin])
}
```

</tab>
<tab>
</tab>
</TabbedContent>

创建新的 `User` 记录时，现在必须为 `firstName`、`lastName` 和 `isAdmin` 提供唯一的值组合：

<TabbedContent tabs={[<FileWithIcon text="仅限关系数据库" icon="database"/>]}>
<tab>

```ts
const user = await prisma.user.create({
  data: {
    firstName: 'Alice',
    lastName: 'Smith',
    isAdmin: true,
  },
})
```

</tab>
<tab>
</tab>
</TabbedContent>

##### 定义包含关系字段的多字段 ID

<TabbedContent tabs={[<FileWithIcon text="仅限关系数据库" icon="database"/>]}>
<tab>

```prisma
model Post {
  title     String
  published Boolean @default(false)
  author    User    @relation(fields: [authorId], references: [id])
  authorId  Int

  @@id([authorId, title])
}

model User {
  id    Int     @default(autoincrement())
  email String  @unique
  name  String?
  posts Post[]
}
```

</tab>
<tab>
</tab>
</TabbedContent>

创建新的 `Post` 记录时，现在必须为 `authorId`（外键）和 `title` 提供唯一的值组合：

<TabbedContent tabs={[<FileWithIcon text="仅限关系数据库" icon="database"/>]}>
<tab>

```ts
const post = await prisma.post.create({
  data: {
    title: 'Hello World',
    author: {
      connect: {
        email: 'alice@prisma.io',
      },
    },
  },
})
```

</tab>
<tab>
</tab>
</TabbedContent>

### <inlinecode>@default</inlinecode>

<AlgoliaTerm name="apiReference" value="@default, default" />

创建 [字段默认值](../../../concepts/components/prisma-schema/data-model#defining-a-default-value) <span class="concept"></span>.

#### 注意

##### 关系数据库

- 对应数据类型: `DEFAULT`
- 默认值可以是静态值（`4`、`"hello"`）或以下 [函数](#attribute-functions) 之一

  - [`autoincrement()`](#autoincrement)
  - [`dbgenerated()`](#dbgenerated)
  - [`cuid()`](#cuid)
  - [`uuid()`](#uuid)
  - [`now()`](#now)

- 当您使用 [内省](../../concepts/components/introspection) 时，Prisma schema 中尚无法表示的默认值由 `dbgenerated（）` 函数表示。
- Prisma schema 中的关系字段不允许使用默认值。但是请注意，您仍然可以使用纯 SQL 在底层数据库中*手动定义*默认值。但是，这些将不会在 Prisma schema 中表示，这是一个临时限制，您可以[在 GitHub 上跟踪](https://github.com/prisma/prisma/issues/1111).

##### MongoDB

- 默认值可以是一个静态值（`4`, `"hello"`）或者以下任意一个 [函数](#attribute-functions) ：

  - [`dbgenerated()`](#dbgenerated) (只能与 `@db.ObjectId` 一起使用，在 MongoDB 中生成一个 `ObjectId`)
  - [`cuid()`](#cuid)
  - [`uuid()`](#uuid)
  - [`now()`](#now)

- 当前版本，默认值不能应用在关系字段上。

#### 参数

| 名称         | 必需   | 类型                                 | 描述 |
| ------------ | ------ | ------------------------------------ | ---- |
| `expression` | **是** | 表达式 (例如： `5`, `true`, `now()`) |      |

`@default` 属性的 `value` 参数名称可以省略：

```prisma no-lines
id Int @id @default(value: autoincrement())
id Int @id @default(autoincrement())
```

#### Signature

```ts no-lines
@default(_ value: Expression)
```

#### 示例

##### `Int` 类型的默认值

<TabbedContent tabs={[<FileWithIcon text="关系数据库" icon="database"/>, <FileWithIcon text="MongoDB" icon="database"/>]}>
<tab>

```prisma
model User {
  email        String @unique
  profileViews Int    @default(0)
}
```

</tab>
<tab>

```prisma
model User {
  id           String @default(dbgenerated()) @map("_id") @db.ObjectId
  profileViews Int    @default(0)
}
```

</tab>
</TabbedContent>

##### `Float` 类型的默认值

<TabbedContent tabs={[<FileWithIcon text="关系数据库" icon="database"/>, <FileWithIcon text="MongoDB" icon="database"/>]}>
<tab>

```prisma
model User {
  email  String @unique
  number Float  @default(1.1)
}
```

</tab>
<tab>

```prisma
model User {
  id     String @default(dbgenerated()) @map("_id") @db.ObjectId
  number Float  @default(1.1)
}
```

</tab>
</TabbedContent>

##### Default value for `Decimal`

<TabbedContent tabs={[<FileWithIcon text="关系数据库" icon="database"/>, <FileWithIcon text="MongoDB" icon="database"/>]}>
<tab>

```prisma
model User {
  email  String  @unique
  number Decimal @default(22.99)
}
```

</tab>
<tab>

```prisma
model User {
  id     String  @default(dbgenerated()) @map("_id") @db.ObjectId
  number Decimal @default(22.99)
}
```

</tab>
</TabbedContent>

##### `BigInt` 类型的默认值

<TabbedContent tabs={[<FileWithIcon text="关系数据库" icon="database"/>, <FileWithIcon text="MongoDB" icon="database"/>]}>
<tab>

```prisma
model User {
  email  String @unique
  number BigInt @default(34534535435353)
}
```

</tab>
<tab>

```prisma
model User {
  id     String @default(dbgenerated()) @map("_id") @db.ObjectId
  number BigInt @default(34534535435353)
}
```

</tab>
</TabbedContent>

##### `String` 类型的默认值

<TabbedContent tabs={[<FileWithIcon text="关系数据库" icon="database"/>, <FileWithIcon text="MongoDB" icon="database"/>]}>
<tab>

```prisma
model User {
  email String @unique
  name  String @default("")
}
```

</tab>
<tab>

```prisma
model User {
  id   String @default(dbgenerated()) @map("_id") @db.ObjectId
  name String @default("")
}
```

</tab>
</TabbedContent>

##### `Boolean` 类型的默认值

<TabbedContent tabs={[<FileWithIcon text="关系数据库" icon="database"/>, <FileWithIcon text="MongoDB" icon="database"/>]}>
<tab>

```prisma
model User {
  email   String  @unique
  isAdmin Boolean @default(false)
}
```

</tab>
<tab>

```prisma
model User {
  id      String  @default(dbgenerated()) @map("_id") @db.ObjectId
  isAdmin Boolean @default(false)
}
```

</tab>
</TabbedContent>

##### `DateTime` 类型的默认值

注意 `DateTime` 的默认值基于 [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) 标准.

<TabbedContent tabs={[<FileWithIcon text="关系数据库" icon="database"/>, <FileWithIcon text="MongoDB" icon="database"/>]}>
<tab>

```prisma
model User {
  email String   @unique
  data  DateTime @default("2020-03-19T14:21:00+02:00")
}
```

</tab>
<tab>

```prisma
model User {
  id   String   @default(dbgenerated()) @map("_id") @db.ObjectId
  data DateTime @default("2020-03-19T14:21:00+02:00")
}
```

</tab>
</TabbedContent>

##### `Bytes` 类型默认值

<TabbedContent tabs={[<FileWithIcon text="关系数据库" icon="database"/>, <FileWithIcon text="MongoDB" icon="database"/>]}>
<tab>

```prisma
model User {
  email  String @unique
  secret Bytes  @default("SGVsbG8gd29ybGQ=")
}
```

</tab>
<tab>

```prisma
model User {
  id     String @default(dbgenerated()) @map("_id") @db.ObjectId
  secret Bytes  @default("SGVsbG8gd29ybGQ=")
}
```

</tab>
</TabbedContent>

##### `enum` 类型默认值

<TabbedContent tabs={[<FileWithIcon text="关系数据库" icon="database"/>, <FileWithIcon text="MongoDB" icon="database"/>]}>
<tab>

```prisma
enum Role {
  USER
  ADMIN
}
```

```prisma highlight=5;normal
model User {
  id      Int      @id @default(autoincrement())
  email   String   @unique
  name    String?
  role    Role     @default(USER)
  posts   Post[]
  profile Profile?
}
```

</tab>
<tab>

```prisma
enum Role {
  USER
  ADMIN
}
```

```prisma highlight=5;normal
model User {
  id      String   @id @default(dbgenerated()) @map("_id") @db.ObjectId
  email   String   @unique
  name    String?
  role    Role     @default(USER)
  posts   Post[]
  profile Profile?
}
```

</tab>
</TabbedContent>

### <inlinecode>@unique</inlinecode>

定义唯一约束。

#### 注意

##### General

- 声明了 `@unique` 的字段可以为可选的，也可以是必需的。
- 如果一个 model 上不存在 `@id` 或者 `@@id`，那么*必需*有一个使用 `@unique` 修饰的字段

- 一个模型可以有任意多个唯一约束
- 可以在任何标量字段上定义
- **不能** 应用在关系字段

##### 关系数据库

- 对应数据库类型: `UNIQUE`
- `NULL` values are considered to be distinct (multiple rows with `NULL` values in the same column are allowed)
- Adding a unique constraint automatically adds a corresponding _unique index_ to the specified column(s).

##### MongoDB

- Enforced by a [unique index in MongoDB](https://docs.mongodb.com/manual/core/index-unique/) - you must create this index yourself

#### Arguments

N/A

#### Signature

```no-lines
@unique
```

#### 示例

##### Specify a unique attribute on a required `String` field

<TabbedContent tabs={[<FileWithIcon text="关系数据库" icon="database"/>, <FileWithIcon text="MongoDB" icon="database"/>]}>
<tab>

```prisma
model User {
  email String @unique
  name  String
}
```

</tab>
<tab>

```prisma
model User {
  id   String @default(dbgenerated()) @map("_id") @db.ObjectId
  name String
}
```

</tab>
</TabbedContent>

##### Specify a unique attribute on an optional `String` field

<TabbedContent tabs={[<FileWithIcon text="关系数据库" icon="database"/>, <FileWithIcon text="MongoDB" icon="database"/>]}>
<tab>

```prisma
model User {
  id    Int     @id @default(autoincrement())
  email String? @unique
  name  String
}
```

</tab>
<tab>

```prisma
model User {
  id    String  @id @default(dbgenerated()) @map("_id") @db.ObjectId
  email String? @unique
  name  String
}
```

</tab>
</TabbedContent>

##### Specify a unique attribute on relation scalar field `authorId`

<TabbedContent tabs={[<FileWithIcon text="关系数据库" icon="database"/>, <FileWithIcon text="MongoDB" icon="database"/>]}>
<tab>

```prisma
model Post {
  author    User    @relation(fields: [authorId], references: [id])
  authorId  Int     @unique
  title     String
  published Boolean @default(false)
}

model User {
  id    Int     @id @default(autoincrement())
  email String? @unique
  name  String
  Post  Post[]
}
```

</tab>
<tab>

```prisma
model Post {
  author    User    @relation(fields: [authorId], references: [id])
  authorId  String  @unique @db.ObjectId
  title     String
  published Boolean @default(false)
}

model User {
  id    String  @id @default(dbgenerated()) @map("_id") @db.ObjectId
  email String? @unique
  name  String
  Post  Post[]
}
```

</tab>
</TabbedContent>

##### Specify a unique attribute with `cuid()` values as default values

<TabbedContent tabs={[<FileWithIcon text="关系数据库" icon="database"/>, <FileWithIcon text="MongoDB" icon="database"/>]}>
<tab>

```prisma
model User {
  token String @unique @default(cuid())
  name  String
}
```

</tab>
<tab>

```prisma
model User {
  id    String @id @default(dbgenerated()) @map("_id") @db.ObjectId
  token String @unique @default(cuid())
  name  String
}
```

</tab>
</TabbedContent>

### <inlinecode>@@unique</inlinecode>

为字段定义复合 [唯一约束](../../../concepts/components/prisma-schema/data-model#defining-a-unique-field) <span class="concept"></span>。

#### 注意

##### General

- 构成唯一约束**的所有字段必须**为必填字段。以下模型**无效**，因为 `id` 可能为 `null`：

  ```prisma
  model User {
    firstname Int
    lastname  Int
    id        Int?
  
    @@unique([firstname, lastname, id])
  }
  ```

  造成这种表现的原因是，所有连接器都认为 `null` 值是不同的，这意味着两个相同的行被认为是唯一的：

  ```
   firstname  | lastname | id
   -----------+----------+------
   John       | Smith    | null
   John       | Smith    | null
  ```

- 一个 model 可以使用任意多个 `@@unique`

##### 关系数据库

- 对应数据库类型: `UNIQUE`
- 如果 model 上没有 `@id` 或 `@@id` 的唯一约束，则必需有 `@@unique`
- 添加唯一约束会自动向指定列添加相应的*唯一索引*）

##### MongoDB

- 由 [MongoDB 中的复合索引](https://docs.mongodb.com/manual/core/index-compound/) 创建 - 您必须自己创建此索引
- `@@unique` 块不能用作模型的唯一唯一标识符 - MongoDB 需要一个 `@id` 字段

#### Arguments

| 名称     | 必需   | 类型               | 描述                                                                                  |
| -------- | ------ | ------------------ | ------------------------------------------------------------------------------------- |
| `fields` | **是** | `FieldReference[]` | 字段列表 - 例如, `["firstname", "lastname"]`. Fields must be mandatory - see remarks. |
| `name`   | **否** | `String`           | 复合字段名称 - 默认 `fieldName1_fieldName2_fieldName3`                                |

`@@unique` 属性上的 `fields` 参数的名称可以省略：

```prisma no-lines
@@unique(fields: [title, author])
@@unique([title, author])
@@unique(fields: [title, author], name: "titleAuthor")
```

#### Signature

```ts no-lines
@@unique(_ fields: FieldReference[], name: String?)
```

#### 示例

##### 在两个 `String` 类型字段上指定多字段唯一属性

<TabbedContent tabs={[<FileWithIcon text="关系数据库" icon="database"/>, <FileWithIcon text="MongoDB" icon="database"/>]}>
<tab>

```prisma
model User {
  id        Int     @default(autoincrement())
  firstName String
  lastName  String
  isAdmin   Boolean @default(false)

  @@unique([firstName, lastName])
}
```

</tab>
<tab>

```prisma
model User {
  id        String  @id @default(dbgenerated()) @map("_id") @db.ObjectId
  firstName String
  lastName  String
  isAdmin   Boolean @default(false)

  @@unique([firstName, lastName])
}
```

</tab>
</TabbedContent>

使用生成的字段名 (`firstname_lastname`) 来查询数据：

```ts highlight=3;normal
const user = await prisma.user.findUnique({
  where: {
    firstName_lastName: {
      firstName: 'Alice',
      lastName: 'Smith',
      isAdmin: true,
    },
  },
})
```

##### 在两个 `String` 字段和一个 `Boolean` 字段上建议复合唯一属性

<TabbedContent tabs={[<FileWithIcon text="关系数据库" icon="database"/>, <FileWithIcon text="MongoDB" icon="database"/>]}>
<tab>

```prisma
model User {
  id        Int     @default(autoincrement())
  firstName String
  lastName  String
  isAdmin   Boolean @default(false)

  @@unique([firstName, lastName, isAdmin])
}
```

</tab>
<tab>

```prisma
model User {
  id        String  @id @default(dbgenerated()) @map("_id") @db.ObjectId
  firstName String
  lastName  String
  isAdmin   Boolean @default(false)

  @@unique([firstName, lastName, isAdmin])
}
```

</tab>
</TabbedContent>

##### 包含关系字段的多字段复合唯一属性

<TabbedContent tabs={[<FileWithIcon text="关系数据库" icon="database"/>, <FileWithIcon text="MongoDB" icon="database"/>]}>
<tab>

```prisma
model Post {
  id        Int     @default(autoincrement())
  author    User    @relation(fields: [authorId], references: [id])
  authorId  Int
  title     String
  published Boolean @default(false)

  @@unique([authorId, title])
}

model User {
  id    Int    @id @default(autoincrement())
  email String @unique
  posts Post[]
}
```

</tab>
<tab>

```prisma
model Post {
  id        String  @id @default(dbgenerated()) @map("_id") @db.ObjectId
  author    User    @relation(fields: [authorId], references: [id])
  authorId  String  @db.ObjectId
  title     String
  published Boolean @default(false)

  @@unique([authorId, title])
}

model User {
  id    String @id @default(dbgenerated()) @map("_id") @db.ObjectId
  email String @unique
  posts Post[]
}
```

</tab>
</TabbedContent>

##### 自定义名称 `name` 的多字段复合唯一属性

<TabbedContent tabs={[<FileWithIcon text="关系数据库" icon="database"/>, <FileWithIcon text="MongoDB" icon="database"/>]}>
<tab>

```prisma
model User {
  id        Int     @default(autoincrement())
  firstName String
  lastName  String
  isAdmin   Boolean @default(false)

  @@unique(fields: [firstName, lastName, isAdmin], name: "admin_identifier")
}
```

</tab>
<tab>

```prisma
model User {
  id        String  @id @default(dbgenerated()) @map("_id") @db.ObjectId
  firstName String
  lastName  String
  isAdmin   Boolean @default(false)

  @@unique(fields: [firstName, lastName, isAdmin], name: "admin_identifier")
}
```

</tab>
</TabbedContent>

使用自定义的 (`admin_identifier`) 查询数据：

```ts highlight=3;normal
const user = await prisma.user.findUnique({
  where: {
    admin_identifier: {
      firstName: 'Alice',
      lastName: 'Smith',
      isAdmin: true,
    },
  },
})
```

### <inlinecode>@@index</inlinecode>

创建数据库索引。

#### 注意

##### 关系数据库

- 对应数据库类型: `INDEX`
- 目前无法为索引提供更多配置选项：
  - PostgreSQL
    - 将索引字段定义为表达式 (例如 `CREATE INDEX title ON public."Post"((lower(title)) text_ops);`)
    - 使用 `USING` 指定索引类型; PostgreSQL 支持以下索引类型: B-tree, hash, GiST, and GIN; Prisma 默认为 B-Tree
    - 定义局部索引 `WHERE`
    - 并发创建索引 `CONCURRENTLY`
  - MySQL
    - 使用 `USING` 指定索引算法 ; MySQL 支持以下索引类型: B-tree, hash; Prisma 默认为 B-Tree

<Admonition type="info">

虽然不能在 Prisma 模式中配置这些选项，但仍然可以直接在数据库层配置它们。

</Admonition>

##### MongoDB

<Admonition type="warning">

**MongoDB 当前未使用** <br />
内省和 Prisma Migrate 当前不支持 MongoDB，这意味着 Prisma Migrate 永远不会使用 `@@index` 属性在数据库中创建索引，而内省也永远不会将 `@@index` 属性添加到 Prisma schema 中

</Admonition>

#### Arguments

| 名称     | 必需   | 类型               | 描述                                                                                                                                                                                                                                        |
| -------- | ------ | ------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `fields` | **是** | `FieldReference[]` | A list of field names - for example, `["firstname", "lastname"]`                                                                                                                                                                            |
| `name`   | **否** | `name`             | The name of the index in the underlying database (Prisma generates an index name that respects identifier length limits if you do not specify a name. Prisma uses the following naming convention: `tablename.field1_field2_field3_unique`) |

`@@index` 属性的 `fields` *参数名*可以省略：

```prisma no-lines
@@index(fields: [title, author])
@@index([title, author])
```

#### Signature

```ts no-lines
@@index(_ fields: FieldReference[], name: String?)
```

#### 示例

为 `Post` 模型的 `title` 字段添加索引

##### 创建单列索引

<TabbedContent tabs={[<FileWithIcon text="仅限关系数据库" icon="database"/>]}>
<tab>

```prisma
model Post {
  id      Int     @id @default(autoincrement())
  title   String
  content String?

  @@index([title])
}
```

</tab>
<tab>
</tab>
</TabbedContent>

##### 创建多列索引

<TabbedContent tabs={[<FileWithIcon text="仅限关系数据库" icon="database"/>]}>
<tab>

```prisma
model Post {
  id      Int     @id @default(autoincrement())
  title   String
  content String?

  @@index([title, content])
}
```

</tab>
<tab>
</tab>
</TabbedContent>

##### 创建命名索引

<TabbedContent tabs={[<FileWithIcon text="仅限关系数据库" icon="database"/>]}>
<tab>

```prisma
model Post {
  id      Int     @id @default(autoincrement())
  title   String
  content String?

  @@index(fields: [title, content], name: "main_index")
}
```

</tab>
<tab>
</tab>
</TabbedContent>

### <inlinecode>@relation</inlinecode>

定义关系的元信息[了解更多信息](../../concepts/components/prisma-schema/relations#the-relation-attribute)。

#### 注意

##### 关系数据库

- 对应数据库类型: `FOREIGN KEY` / `REFERENCES`

##### MongoDB

如果模型的主键在底层数据库中为 `ObjectId` 类型，则主键和外键都必须具有 `@db.ObjectId` 属性

#### 参数

| 名称         | 类型               | 必需                                                                                                                                               | Description                                                                                                                                | Example                                               |
| :----------- | :----------------- | :------------------------------------------------------------------------------------------------------------------------------------------------- | :----------------------------------------------------------------------------------------------------------------------------------------- | :---------------------------------------------------- |
| `name`       | `String`           | Sometimes (e.g. to disambiguate a relation)                                                                                                        | Defines the name of the relationship. In an m-n-relation, it also determines the name of the underlying relation table.                    | `"CategoryOnPost"`, `"MyRelation"`                    |
| `fields`     | `FieldReference[]` | On [annotated](../../../../../../concepts/components/prisma-schema/relations#annotated-relation-fields-and-relation-scalar-fields) relation fields | A list of [fields](../../../concepts/components/prisma-schema/data-model#defining-fields) of the _current_ model                           | `["authorId"]`, `["authorFirstName, authorLastName"]` |
| `references` | `FieldReference[]` | On [annotated](../../../../../../concepts/components/prisma-schema/relations#annotated-relation-fields-and-relation-scalar-fields) relation fields | A list of [fields](../../../concepts/components/prisma-schema/data-model#defining-fields) of the model on _the other side of the relation_ | `["id"]`, `["firstName, lastName"]`                   |

`@relation` 属性上的 `name` 参数的名称可以省略（`references`是必需的）：

<!-- prettier-ignore-start -->
```prisma
@relation(name: "UserOnPost", references: [id])
@relation("UserOnPost", references: [id])

// or

@relation(name: "UserOnPost")
@relation("UserOnPost")
```
<!-- prettier-ignore-end -->

#### Signature

```ts no-lines
@relation(_ name: String?, fields: FieldReference[]?, references: FieldReference[]?)
```

#### 示例

查看更多 [`@relation` 属性](../../concepts/components/prisma-schema/relations#the-relation-attribute).

### <inlinecode>@map</inlinecode>

将 Prisma 架构中的字段名或枚举值映射到数据库中具有不同名称的列或文档字段。如果不使用 `@map` ，则 Prisma 字段名与列名或文档字段名完全匹配。

> 查看 [使用自定义模型和字段名](../../../concepts/components/prisma-client/working-with-prismaclient/use-custom-model-and-field-names) 了解 `@map` 和 `@@map` 怎么生成 Prisma Client。

#### 注意

##### General

- `@map` **不会** 改变 数据库中的列/字段名
- `@map` **会** [改变生成的 client 中的字段名](#map-the-firstname-field-to-a-column-called-first_name)

##### MongoDB

您的 `@id` 字段必须包含 `@map("_id")`。例如：

```prisma
model User {
  id String @default(dbgenerated()) @map("_id") @db.ObjectId
}
```

#### 参数

| 名称   | 类型     | 必需   | 描述                                            | 示例                            |
| :----- | :------- | :----- | :---------------------------------------------- | :------------------------------ |
| `name` | `String` | **是** | 数据库列（关系数据库）或文档字段（MongoDB）名称 | `"comments"`, `"someFieldName"` |

`@map` 属性上的 `name` 参数的名称可以省略：

```prisma
@map(name: "is_admin")
@map("users")
```

#### Signature

```ts no-lines
@map(_ name: String)
```

#### 示例

##### 将 `firstName` 字段映射到名为 `first_name` 的列`

<TabbedContent tabs={[<FileWithIcon text="关系数据库" icon="database"/>, <FileWithIcon text="MongoDB" icon="database"/>]}>
<tab>

```prisma
model User {
  id        Int    @id @default(autoincrement())
  firstName String @map("first_name")
}
```

</tab>
<tab>

```prisma
model User {
  id        String @id @default(dbgenerated()) @map("_id") @db.ObjectId
  firstName String @map("first_name")
}
```

</tab>
</TabbedContent>

The generated client:

```ts highlight=3;normal
await prisma.user.create({
  data: {
    firstName: 'Yewande', // first_name --> firstName
  },
})
```

##### 将名为 `ADMIN` 的枚举映射到名为 `admin` 的数据库枚举

```prisma
enum Role {
  ADMIN     @map("admin")
  CUSTOMER
}
```

### <inlinecode>@@map</inlinecode>

将 Prisma schema 模型名称映射到具有不同名称的表（关系数据库）或集合（MongoDB），或将枚举名称映射到数据库中的不同基础枚举。如果不使用 `@@map`，则模型名称与表（关系数据库）或集合（MongoDB）名称完全匹配。

> 查看 [使用自定义模型和字段名](../../../concepts/components/prisma-client/working-with-prismaclient/use-custom-model-and-field-names) 了解 `@map` 和 `@@map` 如何影响生成的 Prisma Client。

#### 注意

- `@@map` **不会** 改变表/集合名称
- `@@map` **会** [改变生成的 client 的模型名称](#map-the-user-model-to-a-database-tablecollection-named-users)

#### 参数

| 名称   | 类型     | 必需   | 描述                                          | 示例                                        |
| :----- | :------- | :----- | :-------------------------------------------- | :------------------------------------------ |
| `name` | `String` | **是** | 数据库表（关系数据库）或集合（MongoDB）名称。 | `"comments"`, `"someTableOrCollectionName"` |

`@@map` 属性上的 `name` 参数的名称可以省略

```prisma
@@map(name: "users")
@@map("users")
```

#### Signature

```ts no-lines
@@map(_ name: String)
```

#### 示例

##### 将 `User` 模型映射到名为 `users` 的数据库表/集合`

<TabbedContent tabs={[<FileWithIcon text="关系数据库" icon="database"/>, <FileWithIcon text="MongoDB" icon="database"/>]}>
<tab>

```prisma
model User {
  id   Int    @id @default(autoincrement())
  name String

  @@map("users")
}
```

</tab>
<tab>

```prisma
model User {
  id   String @id @default(dbgenerated()) @map("_id") @db.ObjectId
  name String

  @@map("users")
}
```

</tab>
</TabbedContent>

生成的 client:

```ts highlight=1;normal
await prisma.user.create({
  // users --> user
  data: {
    name: 'Yewande',
  },
})
```

##### 将 `Role` 枚举映射到名为 `_Role` 的数据库中的原生枚举，并将其值映射到数据库中的小写值

```prisma
enum Role {
  ADMIN     @map("admin")
  CUSTOMER  @map("customer")

  @@map("_Role")
}
```

### <inlinecode>@updatedAt</inlinecode>

自动存储记录上次更新的时间。如果您自己不提供时间，Prisma 客户端将自动为具有此属性的字段设置值。

#### 注意

- 和 [`DateTime`](#datetime) 字段兼容
- Prisma 原生实现

#### 参数

N/A

#### Signature

```ts no-lines
@updatedAt
```

#### 示例

<TabbedContent tabs={[<FileWithIcon text="关系数据库" icon="database"/>, <FileWithIcon text="MongoDB" icon="database"/>]}>
<tab>

```prisma line-number
model Post {
  id        String   @id
  updatedAt DateTime @updatedAt
}
```

</tab>
<tab>

```prisma line-number
model Post {
  id        String   @id @map("_id") @db.ObjectId
  updatedAt DateTime @updatedAt
}
```

</tab>
</TabbedContent>

### <inlinecode>@ignore</inlinecode>

<AlgoliaTerm name="apiReference" value="@ignore" />

在 [2.17.0](https://github.com/prisma/prisma/releases/tag/2.17.0) 及更高版本中, Prisma 将 `@ignore` 添加到内省时*引用*无效模型的字段中。

#### 注意

- 生成的 Prisma Client 不存在被忽略的字段
- 您可以手动将 `@ignore` 添加到要从 Prisma 客户端排除的字段（例如，不希望 Prisma 用户更新的字段）

#### 示例

在下面的示例中，`tags` 被忽略，因为它引用了无效的模型（ `Product` 上没有 `id`）：

```prisma highlight=5,10;normal
/// 底层表不包含有效的唯一标识符，因此当前无法由 Prisma Client 处理。
model Tag {
  id String? @db.VarChar

  @@ignore
}

model Product {
  id   Int   @default(autoincrement())
  tags Tag[] @ignore
}
```

### <inlinecode>@@ignore</inlinecode>

<AlgoliaTerm name="apiReference" value="@@ignore" />

在[2.17.0](https://github.com/prisma/prisma/releases/tag/2.17.0)以及更高版本中，Prisma 将 `@@ignore` 添加到无效模型中，而不是注释出来。

#### 注意

- 已忽略的模型将从生成的 Prisma Client 中排除。
- 您可以手动将 `@@ignore` 添加到要从 Prisma Client 排除的模型中（例如，您不希望 Prisma 用户更新的模型）

#### 示例

在以下示例中，`Tag` 将被忽略，因为它没有有效的唯一标识：

```prisma highlight=5;normal
/// 底层表不包含有效的唯一标识，因此当前无法由Prisma客户端处理

model Tag {
  id String? @db.VarChar

  @@ignore
}
```

## 属性函数

### <inlinecode>autoincrement()</inlinecode>

<Admonition type="warning">

**MongoDB 不支持** <br />
[MongoDB 连接器](../../concepts/database-connectors/mongodb) 不支持 `autoincrement()` 函数。

</Admonition>

在底层数据库中创建一个整数序列，并根据该序列将递增的值分配给已创建记录的 ID 值。

#### 注意

- 和 `Int` 类型兼容
- 在数据库层实现，这意味着它体现在数据库模式中，可以通过内省进行识别。数据库支持：

  | PostgreSQL                                                                                 | MySQL                                                                                             | SQLite                                                         |
  | ------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------- | -------------------------------------------------------------- |
  | [`SERIAL`](https://www.postgresql.org/docs/9.1/datatype-numeric.html#DATATYPE-SERIAL) type | [`AUTO_INCREMENT`](https://dev.mysql.com/doc/refman/8.0/en/example-auto-increment.html) attribute | [`AUTOINCREMENT`](https://www.sqlite.org/autoinc.html) keyword |

#### 示例

##### 生成自增整数作为 ID

<TabbedContent tabs={[<FileWithIcon text="仅限关系数据库" icon="database"/>]}>
<tab>

```prisma
model User {
  id   Int    @id @default(autoincrement())
  name String
}
```

</tab>
<tab>
</tab>
</TabbedContent>

### <inlinecode>cuid()</inlinecode>

基于 [`cuid`](https://github.com/ericelliott/cuid) 规范生成全局唯一标识符。

#### 注意

- 和 `String` 类型兼容
- 由 Prisma 实现，因此在底层数据库模式中不“可见”。通过 [手动更改 Prisma schema](../../concepts/components/prisma-client/working-with-prismaclient/use-custom-model-and-field-names) 和 [生成 Prisma Client](../../concepts/components/prisma-client/working-with-prismaclient/generating-prisma-client) 使用[内省](../../concepts/components/introspection) 时，您仍然可以使用 `cuid()`，在这种情况下，其值将由 prisma 的 [查询引擎](../../concepts/components/prisma-engines/query-engine) 生成。

##### MongoDB

- `cuid()` 不能生成有效的 `ObjectId` - 如果 `_id` 字段不是 `ObjectId` 类型，则仍然可以通过 [使用`db.ObjectId`语法](#generate-objectid-as-ids-mongodb-only) 使用 `cuid()`。

#### 示例

##### 生成 `cuid()` 作为 ID

<TabbedContent tabs={[<FileWithIcon text="关系数据库" icon="database"/>, <FileWithIcon text="MongoDB" icon="database"/>]}>
<tab>

```prisma
model User {
  id   String @id @default(cuid())
  name String
}
```

</tab>
<tab>

```prisma
model User {
  id   String @id @default(cuid()) @map("_id")
  name String
}
```

</tab>
</TabbedContent>

### <inlinecode>uuid()</inlinecode>

基于 [UUID](https://en.wikipedia.org/wiki/Universally_unique_identifier) 规范生成全局唯一标识符。

#### 注意

- 和 `String` 类型兼容
- 由 Prisma 实现，因此在底层数据库模式中不“可见”。通过 [手动更改 Prisma schema](../../concepts/components/prisma-client/working-with-prismaclient/use-custom-model-and-field-names) 和 [生成 Prisma Client](../../concepts/components/prisma-client/working-with-prismaclient/generating-prisma-client) 使用[内省](../../concepts/components/introspection) 时，您仍然可以使用 `cuid()`，在这种情况下，值将由 prisma 的 [查询引擎](../../concepts/components/prisma-engines/query-engine) 生成。

<Admonition type='info'>

**注意 (关系数据库)**: 如果不想使用 Prisma 的 `uuid()` '函数，可以使用 [原生数据库函数 'dbgenerated`](#override-default-value-behavior-for-supported-types)。

</Admonition>

##### MongoDB

- `uuid()` 不能生成有效的 `ObjectId` - 如果 `_id` 字段不是 `ObjectId` 类型，则仍然可以通过 [使用`db.ObjectId`语法](#generate-objectid-as-ids-mongodb-only) 使用 `cuid()`。

#### 示例

##### 生成 `uuid()` 作为 ID

<TabbedContent tabs={[<FileWithIcon text="关系数据库" icon="database"/>, <FileWithIcon text="MongoDB" icon="database"/>]}>
<tab>

```prisma
model User {
  id   String @id @default(uuid())
  name String
}
```

</tab>
<tab>

```prisma
model User {
  id   String @id @default(uuid()) @map("_id")
  name String
}
```

</tab>
</TabbedContent>

### <inlinecode>now()</inlinecode>

设置创建记录的时间戳。

#### 注意

##### General

- 和 [`DateTime`](#datetime) 类型兼容。

##### 关系数据库

- 在数据库层实现，这意味着它体现在数据库 schema 中，可以通过内省进行识别。数据库支持：

  | PostgreSQL                                                                                                                     | MySQL                                                                                                                               | SQLite                                 |
  | ------------------------------------------------------------------------------------------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------- |
  | [`CURRENT_TIMESTAMP`](https://www.postgresql.org/docs/current/functions-datetime.html#FUNCTIONS-DATETIME-CURRENT) 别名 `now()` | [`CURRENT_TIMESTAMP`](https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_current-timestamp) 别名 `now()` | `CURRENT_TIMESTAMP` 别名 `date('now')` |

##### MongoDB

- 在 Prisma 层实现。

### <inlinecode>dbgenerated()</inlinecode>

表示无法在 Prisma schema 中表示的 **默认值**（如 `random()`）

#### 注意

##### 关系数据库

- 兼容任意类型
- 如果存在值，则该值不能为空 (例如， `dbgenerated("")`) - [2.21.0](https://github.com/prisma/prisma/releases/tag/2.21.0) 以及更高版本
- [2.17.0](https://github.com/prisma/prisma/releases/tag/2.17.0) 以后支持 `String`类型，将允许:

  - [为 `Unsupported` 类型设置默认值](#set-default-value-for-unsupported-type)
  - [覆盖支持的数据类型的默认值](#override-default-value-behavior-for-supported-types)

##### MongoDB

- 只能用于为 `@id` 字段生成 `ObjectId`：

  ```prisma
  id  String  @map("_id") @db.ObjectId @default(dbgenerated())
  ```

- 必须为空： `dbgenerated()`

#### 示例

##### 为 `Unsupported` 类型设置默认值。

<TabbedContent tabs={[<FileWithIcon text="仅限关系数据库" icon="database"/>]}>
<tab>

```prisma
circle     Unsupported("circle")?   @default(dbgenerated("'<(10,4),11>'::circle"))
```

</tab>
<tab>
</tab>
</TabbedContent>

##### 覆盖支持类型的默认值表现

<TabbedContent tabs={[<FileWithIcon text="仅限关系数据库" icon="database"/>]}>
<tab>

你还可以使用 `dbgenerated()` 为支持的类型设置默认值。例如，您可以在数据库层生成 uuid，而不是依赖 Prisma 的 `uuid()`：

```prisma highlight=2;add|3;delete
model User {
  id   String  @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  id   String  @id @default(uuid()) @db.Uuid
  test String?
}
```

</tab>
<tab>
</tab>
</TabbedContent>

<Admonition type="info">

**注意**: [`gen_random_uuid()` 是一个 PostgreSQL 函数](https://www.postgresql.org/docs/13/functions-uuid.html)。 必须启用 `pgcrypto` 扩展才可以使用.

</Admonition>

##### 生成 <inlinecode>ObjectId</inlinecode> (仅限 MongoDB)

<TabbedContent tabs={[<FileWithIcon text="仅限MongoDB" icon="database"/>]}>
<tab>

```prisma
model User {
  id   String  @id @default(dbgenerated()) @map("_id") @db.ObjectId
  name String?
}
```

</tab>
<tab>
</tab>
</TabbedContent>

## 属性参数类型

### <inlinecode>FieldReference[]</inlinecode>

[字段](#model-fields) 名称的数组: `[id]`, `[firstName, lastName]`

### <inlinecode>String</inlinecode>

双引号中的可变长度文本: `""`, `"Hello World"`, `"Alice"`

### <inlinecode>Expression</inlinecode>

可由 Prisma 计算的表达式: `42.0`, `""`, `Bob`, `now()`, `cuid()`

## <inlinecode>enum</inlinecode>

<Admonition type="warning">

**SQLite 和 SQL Server 不支持** <br />
[SQLite 连接器](../../concepts/database-connectors/sqlite) 和 [SQL Server 连接器](../../concepts/database-connectors/microsoft-sql-server) 不支持 `enum` 类型.

</Admonition>

定义一个 [enum](../../../concepts/components/prisma-schema/data-model#defining-enums) <span class="concept"></span>.

### 注意

- [PostgreSQL](https://www.postgresql.org/docs/current/datatype-enum.html) 和 [MySQL](https://dev.mysql.com/doc/refman/8.0/en/enum.html) 原生支持枚举。
- Prisma 层对 MongoDB 进行了枚举实现支持。

### 命名规范

- 枚举名称必须以字母开头（通常采用 [PascalCase](http://wiki.c2.com/?PascalCase) 拼写格式）
- 枚举必须使用单数 (例如：使用 `Role` 而不是 of `role`，`roles` 或者 `Roles`).
- 必须满足以下正则表达式: `[A-Za-z][A-Za-z0-9_]*`

### 示例

#### 定义一个有两个选项的 `enum`。

<TabbedContent tabs={[<FileWithIcon text="关系数据库" icon="database"/>, <FileWithIcon text="MongoDB" icon="database"/>]}>
<tab>

```prisma
enum Role {
  USER
  ADMIN
}

model User {
  id   Int  @id @default(autoincrement())
  role Role
}
```

</tab>
<tab>

```prisma
enum Role {
  USER
  ADMIN
}

model User {
  id   String @id @default(dbgenerated()) @map("_id") @db.ObjectId
  role Role
}
```

</tab>
</TabbedContent>

#### 定义一个有两个选项的 `enum` 并且设定默认值。

<TabbedContent tabs={[<FileWithIcon text="关系数据库" icon="database"/>, <FileWithIcon text="MongoDB" icon="database"/>]}>
<tab>

```prisma
enum Role {
  USER
  ADMIN
}

model User {
  id   Int  @id @default(autoincrement())
  role Role @default(USER)
}
```

</tab>
<tab>

```prisma
enum Role {
  USER
  ADMIN
}

model User {
  id   String @id @default(dbgenerated())
  role Role   @default(USER)
}
```

</tab>
</TabbedContent>
