(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{100:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return o})),a.d(t,"metadata",(function(){return c})),a.d(t,"rightToc",(function(){return p})),a.d(t,"default",(function(){return m}));var n=a(1),r=a(6),i=(a(0),a(115)),o={},c={id:"getting-started/start-from-scratch-with-empty-db/quickstart-prisma-migrate",title:"quickstart-prisma-migrate",description:"# Quickstart: Prisma Migrate (experimental)",source:"@site/docs/getting-started/start-from-scratch-with-empty-db/quickstart-prisma-migrate.md",permalink:"/docs/getting-started/start-from-scratch-with-empty-db/quickstart-prisma-migrate",editUrl:"https://github.com/prisma/prisma2/edit/master/website/docs/getting-started/start-from-scratch-with-empty-db/quickstart-prisma-migrate.md"},p=[],s={rightToc:p};function m(e){var t=e.components,a=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(n.a)({},s,a,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h1",{id:"quickstart-prisma-migrate-experimental"},"Quickstart: Prisma Migrate (experimental)"),Object(i.b)("p",null,"This page explains how to get started with Prisma from scratch by connecting it to an empty database. It uses Prisma Migrate to define and migrate your database schema."),Object(i.b)("blockquote",null,Object(i.b)("p",{parentName:"blockquote"},Object(i.b)("strong",{parentName:"p"},"Warning"),": Prisma Migrate is currently in an ",Object(i.b)("strong",{parentName:"p"},"experimental")," state. When using any of the commands below, you need to explicitly opt-in via an ",Object(i.b)("inlineCode",{parentName:"p"},"--experimental")," flag, e.g. ",Object(i.b)("inlineCode",{parentName:"p"},"prisma2 migrate save --name 'init' --experimental"),".")),Object(i.b)("p",null,"Follow these steps for an initial Prisma setup:"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Run ",Object(i.b)("inlineCode",{parentName:"p"},"mkdir hello-prisma")," to create your project directory")),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Run ",Object(i.b)("inlineCode",{parentName:"p"},"cd hello-prisma")," to navigate into it")),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Run ",Object(i.b)("inlineCode",{parentName:"p"},"touch schema.prisma")," to create an empty ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"../../prisma-schema-file.md"}),"Prisma schema"))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Add a ",Object(i.b)("inlineCode",{parentName:"p"},"datasource")," to the Prisma schema and set your database connection string as the ",Object(i.b)("inlineCode",{parentName:"p"},"url"),", e.g.:"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-prisma"}),'datasource db {\n  provider = "postgresql"\n  url      = "postgresql://janedoe:janedoe@localhost:5432/hello-prisma"\n}\n'))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Add your models to the Prisma schema, e.g.:"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-prisma"}),"model Post {\n  post_id    Int      @id @default(autoincrement())\n  content    String?\n  title      String\n  author     User?\n}\n\nmodel Profile {\n  profile_id Int     @id @default(autoincrement())\n  bio        String?\n  user       User\n}\n\nmodel User {\n  user_id  Int       @id @default(autoincrement())\n  email    String    @unique\n  name     String?\n  posts    Post[]\n  profiles Profile[]\n}\n"))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Add a ",Object(i.b)("inlineCode",{parentName:"p"},"generator")," to the Prisma schema to be able to generate Prisma Client:"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-prisma"}),'generator client {\n  provider = "prisma-client-js"\n}\n'))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Run the following commands to configure your project (TypeScript):"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",Object(n.a)({parentName:"pre"},{}),"npm init -y\nnpm install typescript ts-node prisma2 --save-dev\nnpm install @prisma/client\n"))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Run ",Object(i.b)("inlineCode",{parentName:"p"},"touch tsconfig.json")," and the following contents to it:"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),'{\n  "compilerOptions": {\n    "sourceMap": true,\n    "outDir": "dist",\n    "strict": true,\n    "lib": ["esnext", "dom"],\n    "esModuleInterop": true\n  }\n}\n'))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Migrate your database by running the following commands:"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",Object(n.a)({parentName:"pre"},{}),"npx prisma2 migrate save --name 'init' --experimental\nnpx prisma2 migrate up --experimental\n"))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Generate Prisma Client based on your data model with the following command:"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",Object(n.a)({parentName:"pre"},{}),"npx prisma2 generate\n"))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Run ",Object(i.b)("inlineCode",{parentName:"p"},"touch index.ts")," to create a source file and add the following code:"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-ts"}),"import { PrismaClient } from '@prisma/client'\n\nconst prisma = new PrismaClient()\n\n// A `main` function so that we can use async/await\nasync function main() {\n  const user1 = await prisma.user.create({\n    data: {\n      email: 'alice@prisma.io',\n      name: 'Alice',\n      posts: {\n        create: {\n          title: 'Watch the talks from Prisma Day 2019',\n          content: 'https://www.prisma.io/blog/z11sg6ipb3i1/',\n        },\n      },\n    },\n    include: {\n      posts: true,\n    },\n  })\n  console.log(user1)\n}\n\nmain()\n  .catch(e => console.error(e))\n  .finally(async () => {\n    await prisma.disconnect()\n  })\n"))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Run ",Object(i.b)("inlineCode",{parentName:"p"},"npx ts-node index.ts")," to execute the script"))))}m.isMDXComponent=!0}}]);